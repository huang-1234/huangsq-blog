# yarn config

## Yarn cacheä¹‹å‘

è¿«äºç”µè„‘Cç›˜åªæ˜¯128Gçš„å›ºæ€ï¼Œè™½ç„¶è¿˜æœ‰1ä¸ªTçš„æœºæ¢°ç©ºé—´ï¼Œä½†å®Œå…¨æ²¡ç”¨å‘€ğŸ˜­ã€‚çœ¼çœ‹Cç›˜è¶Šæ¥è¶Šå°ï¼Œæ²¡åŠæ³•å¼€å§‹ç½‘ä¸Šå„ç§æœç´¢ï¼Œä¼˜åŒ–Cç›˜çš„åŠæ³•ã€‚

é¦–å…ˆæ˜¯å‘ç°äº†TreeSizeç¥å™¨ï¼Œè¿™ä¸ªèƒ½ç›´æ¥çœ‹åˆ°æ¯ä¸ªç›˜ä¸‹é¢æ–‡ä»¶å¤¹çš„å¤§å°ï¼ŒçœŸçš„æ˜¯ä¸€ç›®äº†ç„¶ï¼Œå¼ºçƒˆæ¨èã€‚

è¿™ä¸ªæ—¶å€™å°±å‘ç°äº†Yarnä¼šåœ¨Cç›˜ä¸ªäººç›®å½•ä¸‹é¢ç¼“å­˜å¤§é‡çš„åŒ…ï¼Œå‘ç°çš„æ—¶å€™å·²ç»6ä¸ªGäº†ğŸ˜­ã€‚

ä¸‹é¢å°±ä»‹ç»ä¸€ä¸‹Yarnæä¾›çš„å‡ ä¸ªç¼“å­˜å‘½ä»¤ï¼š

### ä¸€ã€yarn cache dir

è¿è¡Œè¿™ä¸ªå‘½ä»¤ä¼šæ˜¾ç¤ºå‡ºå½“å‰ç¼“å­˜ç›®å½•ï¼Œé»˜è®¤ä¸ºCç›˜ã€‚ä¾‹å¦‚æˆ‘ç”µè„‘çš„ä¸º

```bash
C:\Users\***\AppData\Local\Yarn\Cache\v4
```



### äºŒã€yarn cache clean [<module_nameâ€¦>]

è¿è¡Œè¿™ä¸ªå‘½ä»¤ä¼šæ¸…ç†ç¼“å­˜åŒ…ï¼Œå¦‚æœæ²¡æœ‰æŒ‡å®šåŒ…ååˆ™ä¼šå…¨éƒ¨æ¸…ç†ï¼ŒæŒ‡å®šäº†å°±æ¸…ç†ç›¸å…³åŒ…ã€‚
ä¸è¿‡è¦æ³¨æ„ï¼Œè¦å…ˆæ¸…ç†ç„¶åå†é…ç½®ç›®å½•ï¼Œå¯èƒ½ä¼šå› ä¸ºé…ç½®å®Œç›®ä¹‹åï¼Œå¯¼è‡´ä¹‹å‰ç¼“å­˜ä¸‹æ¥çš„æ²¡æ³•åˆ é™¤ã€‚

### ä¸‰ã€yarn config set cache-folder

è®¾ç½®å½“å‰ç¼“å­˜ç›®å½•ï¼Œä¾‹å¦‚æˆ‘æŒ‡å®šäº†ç¼“å­˜ç›®å½•ï¼š

```bash
yarn config set cache-folder G:\YarnCache
```



è¿è¡Œå®Œå½“ç„¶å¯ä»¥å†æ¬¡è¿è¡Œyarn cache dirï¼Œæ¥æ£€æŸ¥ä¸‹æ˜¯å¦é…ç½®æˆåŠŸï¼Œå½“ç„¶ä¹Ÿå¯ä»¥æ‰¾ä¸€ä¸ªé¡¹ç›®è¿è¡Œyarn installæ¥è¯•ä¸‹ã€‚

### å››ã€åŒæ ·çš„é“ç†npmä¹Ÿä¼šåœ¨ç”¨æˆ·ç›®å½•ä¸‹é¢ç¼“å­˜å¤§é‡çš„æ–‡ä»¶ï¼Œä¸è¿‡æ¯”yarnå°‘äº†å¾ˆå¤šï¼Œåªæœ‰1ä¸ªGå·¦å³ã€‚

```
npm config get cache
npm cache clean --force
npm config set cache "D:\ProgramFile\nodejs\node_modules\node_cache"
npm cache verifyï¼šéªŒè¯æ¸…ç†çš„æœ‰æ•ˆæ€§
```

### äº”ã€å¦å¤–ä¸€äº›æ¸…ç†Cç›˜çš„å‘ç°

1. IntellJä»¥åŠåŸºäºå®ƒå¼€å‘çš„Webstromã€AndroidStudioä¹Ÿä¼šåœ¨ä¸ªäººç›®å½•ä¸‹é¢ç¼“å­˜å¤§é‡çš„é…ç½®æ–‡ä»¶ï¼Œ1-2ä¸ªGäº†ï¼Œæ‰€ä»¥JetBrainså…¨å®¶æ¡¶å¯ä»¥è€ƒè™‘åªè£…ä¸€ä¸ªIntellJï¼Œå…¶ä»–webstromã€pycharmç­‰å¯ä»¥è€ƒè™‘å®‰è£…æ’ä»¶ã€‚
2. window10ç³»ç»Ÿæ›´æ–°å®Œï¼Œä¼šåœ¨Cç›˜æœ‰ä¸€ä¸ªwindows.oldç›®å½•ï¼Œè¿™ä¸ªå¦‚æœç³»ç»Ÿæ›´æ–°å®Œæ²¡æœ‰å•¥é—®é¢˜ï¼Œè¿‡æ®µæ—¶é—´ä¹Ÿæ˜¯å¯ä»¥åˆ é™¤çš„ã€‚

## Yarn yarn.lockæ–‡ä»¶

ä¸ºäº†åœ¨å¤šå°æœºå™¨ä¹‹é—´è·å¾—ä¸€è‡´çš„å®‰è£…ç»“æœï¼ŒYarn å¯èƒ½ä¼šéœ€è¦æ¯” `package.json` æ–‡ä»¶ä¸­é…ç½®çš„ä¾èµ–é¡¹æ›´å¤šçš„ä¿¡æ¯ã€‚å®ƒéœ€è¦å‡†ç¡®å­˜å‚¨æ¯ä¸€ä¸ªä¾èµ–é¡¹çš„å®‰è£…ç‰ˆæœ¬ã€‚å› æ­¤åœ¨ Yarn é¡¹ç›®çš„æ ¹ç›®å½•æˆ‘ä»¬éœ€è¦ä¸€ä¸ª `yarn.lock` æ–‡ä»¶ï¼Œè¿™ä¸ª `yarn.lock` æ–‡ä»¶æ˜¯è‡ªåŠ¨ç”Ÿæˆçš„ã€‚

å½“æˆ‘ä»¬æ‰§è¡Œ `yarn` å‘½ä»¤æˆ–è€…æ·»åŠ ä¾èµ–åŒ…å‘½ä»¤åï¼ŒYarn éƒ½ä¼šåœ¨é¡¹ç›®æ ¹ç›®å½•ä¸‹è‡ªåŠ¨ç”Ÿæˆä¸€ä¸ª `yarn.lock` æ–‡ä»¶ã€‚åœ¨ä½¿ç”¨ Yarn å®‰è£…ã€å‡çº§ã€åˆ é™¤ä¾èµ–é¡¹ç›®æ—¶ï¼Œä¼šè‡ªåŠ¨æ›´æ–°åˆ° `yarn.lock` æ–‡ä»¶ä¸­ã€‚ä¸€èˆ¬æˆ‘ä»¬ä¸ä¼šå»æ‰‹åŠ¨ç¼–è¾‘è¿™ä¸ªæ–‡ä»¶ï¼Œå› ä¸ºå¾ˆå®¹æ˜“ç ´åè¿™ä¸ªæ–‡ä»¶ã€‚

### ç¤ºä¾‹ï¼š

ä¾‹å¦‚æˆ‘ä»¬å®‰è£…äº†ä¸€äº›ä¾èµ–åŒ…ï¼Œé‚£ä¹ˆ `yarn.lock` æ–‡ä»¶å†…å®¹ç±»ä¼¼æ‰€ç¤ºæ ¼å¼ï¼š

```
copy-descriptor@^0.1.0:
  version "0.1.1"
  resolved "https://registry.yarnpkg.com/copy-descriptor/-/copy-descriptor-0.1.1.tgz#676f6eb3c39997c2ee1ac3a924fd6124748f578d"
  integrity sha1-Z29us8OZl8LuGsOpJP1hJHSPV40=

core-util-is@~1.0.0:
  version "1.0.2"
  resolved "https://registry.yarnpkg.com/core-util-is/-/core-util-is-1.0.2.tgz#b5fd54220aa2bc5ab57aab7140c940754503c1a7"
  integrity sha1-tf1UIgqivFq1eqtxQMlAdUUDwac=

create-ecdh@^4.0.0:
  version "4.0.3"
  resolved "https://registry.yarnpkg.com/create-ecdh/-/create-ecdh-4.0.3.tgz#c9111b6f33045c4697f144787f9254cdc77c45ff"
  integrity sha512-GbEHQPMOswGpKXM9kCWVrremUcBmjteUaQ01T9rkKCPDXfUHX0IoP9LpHYo2NPFampa4e+/pFDc3jQdxrxQLaw==
  dependencies:
    bn.js "^4.1.0"
    elliptic "^6.0.0"
```

å¯ä»¥æ˜æ˜¾çœ‹åˆ° `yarn.lock` æ–‡ä»¶ä¸­çš„ä¿¡æ¯æ¯” `package.json` æ–‡ä»¶ä¸­è¯¦ç»†äº†å¾ˆå¤šã€‚

åœ¨å®é™…é¡¹ç›®ä¸­ï¼Œ`yarn.lock` æ–‡ä»¶ä¹Ÿå¾ˆæœ‰ç”¨å¤„ï¼Œæˆ‘ä»¬å¯ä»¥å°† `yarn.lock` æäº¤åˆ°ç‰ˆæœ¬åº“ä¸­ï¼Œå…¶ä»–æˆå‘˜å°±å¯ä»¥é€šè¿‡ `yarn install `è·å–æ‰€æœ‰ä¾èµ–åŒ…ï¼Œè¿™ä¸ªå¯ä»¥ä¿è¯å¤§å®¶å®‰è£…çš„ä¾èµ–æ˜¯å®Œå…¨ä¸€è‡´çš„ï¼Œé¿å…äº§ç”Ÿ `bug`ã€‚

## ä¿®æ”¹Yarnçš„å…¨å±€å®‰è£…å’Œç¼“å­˜ä½ç½®

åœ¨CMDå‘½ä»¤è¡Œä¸­æ‰§è¡Œ



```bash
#1.æ”¹å˜ yarn å…¨å±€å®‰è£…ä½ç½®
yarn config  set global-folder "ä½ çš„ç£ç›˜è·¯å¾„"
#2.ç„¶åä½ ä¼šåœ¨ä½ çš„ç”¨æˆ·ç›®å½•æ‰¾åˆ° `.yarnrc` çš„æ–‡ä»¶ï¼Œæ‰“å¼€å®ƒï¼Œæ‰¾åˆ° `global-folder` ï¼Œæ”¹ä¸º `--global-folder`
#è¿™é‡Œæ˜¯æˆ‘çš„è·¯å¾„
yarn config  set global-folder "F:\JS_SoftWare\yarn\yarn_cache"
```



```bash
#2. æ”¹å˜ yarn ç¼“å­˜ä½ç½®
yarn config set cache-folder "ä½ çš„ç£ç›˜è·¯å¾„"
#è¿™é‡Œæ˜¯æˆ‘çš„è·¯å¾„
yarn config set cache-folder "F:\JS_SoftWare\yarn\yarn_global"
```

åœ¨æˆ‘ä»¬ä½¿ç”¨ å…¨å±€å®‰è£… åŒ…çš„æ—¶å€™ï¼Œä¼šåœ¨ â€œD:\Software\yarn\globalâ€ ä¸‹ ç”Ÿæˆ `node_modules\.bin` ç›®å½•

æˆ‘ä»¬éœ€è¦å°† `D:\Software\yarn\global\node_modules\.bin` æ•´ä¸ªç›®å½• æ·»åŠ åˆ°ç³»ç»Ÿç¯å¢ƒå˜é‡ä¸­å»ï¼Œå¦åˆ™é€šè¿‡yarn æ·»åŠ çš„å…¨å±€åŒ… åœ¨cmd ä¸­æ˜¯æ‰¾ä¸åˆ°çš„ã€‚

æ£€æŸ¥å½“å‰yarn çš„ binçš„ ä½ç½®



```bash
yarn global bin
```

æ£€æŸ¥å½“å‰ yarn çš„ å…¨å±€å®‰è£…ä½ç½®



```bash
yarn global dir
```