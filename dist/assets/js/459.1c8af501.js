(window.webpackJsonp=window.webpackJsonp||[]).push([[459],{970:function(e,t,a){"use strict";a.r(t);var n=a(6),v=Object(n.a)({},(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[a("h1",{attrs:{id:"vueå˜åŒ–ä¾¦æµ‹åŸç†"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#vueå˜åŒ–ä¾¦æµ‹åŸç†"}},[e._v("#")]),e._v(" vueå˜åŒ–ä¾¦æµ‹åŸç†")]),e._v(" "),a("p",[e._v("å…³äºvueçš„å†…éƒ¨åŸç†å…¶å®æœ‰å¾ˆå¤šä¸ªé‡è¦çš„éƒ¨åˆ†ï¼Œå˜åŒ–ä¾¦æµ‹ï¼Œæ¨¡æ¿ç¼–è¯‘ï¼ŒvirtualDOMï¼Œæ•´ä½“è¿è¡Œæµç¨‹ç­‰ã€‚")]),e._v(" "),a("p",[e._v("ä»Šå¤©ä¸»è¦æŠŠå˜åŒ–ä¾¦æµ‹è¿™éƒ¨åˆ†å•ç‹¬æ‹¿å‡ºæ¥è®²ä¸€è®²ã€‚")]),e._v(" "),a("h2",{attrs:{id:"å¦‚ä½•ä¾¦æµ‹å˜åŒ–"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#å¦‚ä½•ä¾¦æµ‹å˜åŒ–"}},[e._v("#")]),e._v(" å¦‚ä½•ä¾¦æµ‹å˜åŒ–ï¼Ÿ")]),e._v(" "),a("p",[e._v("å…³äºå˜åŒ–ä¾¦æµ‹é¦–å…ˆè¦é—®ä¸€ä¸ªé—®é¢˜ï¼Œåœ¨ js ä¸­ï¼Œå¦‚ä½•ä¾¦æµ‹ä¸€ä¸ªå¯¹è±¡çš„å˜åŒ–ï¼Œå…¶å®è¿™ä¸ªé—®é¢˜è¿˜æ˜¯æ¯”è¾ƒç®€å•çš„ï¼Œå­¦è¿‡jsçš„éƒ½èƒ½çŸ¥é“ï¼Œjsä¸­æœ‰ä¸¤ç§æ–¹æ³•å¯ä»¥ä¾¦æµ‹åˆ°å˜åŒ–ï¼Œ"),a("code",[e._v("Object.defineProperty")]),e._v(" å’Œ ES6 çš„"),a("code",[e._v("proxy")]),e._v("ã€‚")]),e._v(" "),a("p",[e._v("åˆ°ç›®å‰ä¸ºæ­¢vueè¿˜æ˜¯ç”¨çš„ "),a("code",[e._v("Object.defineProperty")]),e._v("ï¼Œæ‰€ä»¥æˆ‘ä»¬æ‹¿ "),a("code",[e._v("Object.defineProperty")]),e._v("æ¥ä¸¾ä¾‹å­è¯´æ˜è¿™ä¸ªåŸç†ã€‚")]),e._v(" "),a("p",[e._v("è¿™é‡Œæˆ‘æƒ³è¯´çš„æ˜¯ï¼Œä¸ç®¡ä»¥åvueæ˜¯å¦ä¼šç”¨ "),a("code",[e._v("proxy")]),e._v(" é‡å†™è¿™éƒ¨åˆ†ï¼Œæˆ‘è®²çš„æ˜¯åŸç†ï¼Œå¹¶ä¸æ˜¯apiï¼Œæ‰€ä»¥ä¸è®ºä»¥åvueä¼šæ€æ ·æ”¹ï¼Œè¿™ä¸ªåŸç†æ˜¯ä¸ä¼šå˜çš„ï¼Œå“ªæ€•vueç”¨äº†å…¶ä»–å®Œå…¨ä¸åŒçš„åŸç†å®ç°äº†å˜åŒ–ä¾¦æµ‹ï¼Œä½†æ˜¯æœ¬ç¯‡æ–‡ç« è®²çš„åŸç†ä¸€æ ·å¯ä»¥å®ç°å˜åŒ–ä¾¦æµ‹ï¼ŒåŸç†è¿™ä¸ªä¸œè¥¿æ˜¯ä¸ä¼šè¿‡æ—¶çš„ã€‚")]),e._v(" "),a("p",[e._v("ä¹‹å‰æˆ‘å†™æ–‡ç« æœ‰ä¸€ä¸ªæ¯›ç—…å°±æ˜¯å–œæ¬¢å¯¹ç€æºç ç¿»è¯‘ï¼Œç»“æœè¿‡äº†åŠå¹´ä¸€å¹´äººå®¶æºç æ”¹äº†ï¼Œæˆ‘å†™çš„æ–‡ç« å°±ä¸€æ¯›é’±éƒ½ä¸å€¼äº†ï¼Œè€Œä¸”å¯¹ç€æºç ç¿»è¯‘è¿˜æœ‰ä¸€ä¸ªç¼ºç‚¹æ˜¯å¯¹è¯»è€…çš„è¦æ±‚æœ‰ç‚¹åé«˜ï¼Œè¯»è€…å¦‚æœæ²¡çœ‹è¿‡æºç æˆ–è€…çœ‹çš„å’Œæˆ‘ä¸æ˜¯ä¸€ä¸ªç‰ˆæœ¬ï¼Œé‚£æ ¹æœ¬å°±ä¸çŸ¥é“æˆ‘åœ¨è¯´ä»€ä¹ˆã€‚")]),e._v(" "),a("p",[e._v("å¥½äº†ä¸è¯´åºŸè¯äº†ï¼Œç»§ç»­è®²åˆšæ‰çš„å†…å®¹ã€‚")]),e._v(" "),a("p",[e._v("çŸ¥é“ "),a("code",[e._v("Object.defineProperty")]),e._v(" å¯ä»¥ä¾¦æµ‹åˆ°å¯¹è±¡çš„å˜åŒ–ï¼Œé‚£ä¹ˆæˆ‘ä»¬ç¬é—´å¯ä»¥å†™å‡ºè¿™æ ·çš„ä»£ç ï¼š")]),e._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("function defineReactive (data, key, val) {\n    Object.defineProperty(data, key, {\n        enumerable: true,\n        configurable: true,\n        get: function () {\n            return val\n        },\n        set: function (newVal) {\n            if(val === newVal){\n                return\n            }\n            val = newVal\n        }\n    })\n}\n")])])]),a("p",[e._v("å†™ä¸€ä¸ªå‡½æ•°å°è£…ä¸€ä¸‹ "),a("code",[e._v("Object.defineProperty")]),e._v("ï¼Œæ¯•ç«Ÿ "),a("code",[e._v("Object.defineProperty")]),e._v("çš„ç”¨æ³•è¿™ä¹ˆå¤æ‚ï¼Œå°è£…ä¸€ä¸‹æˆ‘åªéœ€è¦ä¼ é€’ä¸€ä¸ª dataï¼Œå’Œ keyï¼Œval å°±è¡Œäº†ã€‚")]),e._v(" "),a("p",[e._v("ç°åœ¨å°è£…å¥½äº†ä¹‹åæ¯å½“ "),a("code",[e._v("data")]),e._v(" çš„ "),a("code",[e._v("key")]),e._v(" è¯»å–æ•°æ® "),a("code",[e._v("get")]),e._v(" è¿™ä¸ªå‡½æ•°å¯ä»¥è¢«è§¦å‘ï¼Œè®¾ç½®æ•°æ®çš„æ—¶å€™ "),a("code",[e._v("set")]),e._v(" è¿™ä¸ªå‡½æ•°å¯ä»¥è¢«è§¦å‘ï¼Œä½†æ˜¯ï¼Œï¼Œï¼Œï¼Œï¼Œï¼Œï¼Œï¼Œï¼Œï¼Œï¼Œï¼Œï¼Œï¼Œï¼Œï¼Œï¼Œï¼Œå‘ç°å¥½åƒå¹¶æ²¡ä»€ä¹ˆé¸Ÿç”¨ï¼Ÿ")]),e._v(" "),a("h2",{attrs:{id:"æ€ä¹ˆè§‚å¯Ÿ"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#æ€ä¹ˆè§‚å¯Ÿ"}},[e._v("#")]),e._v(" æ€ä¹ˆè§‚å¯Ÿï¼Ÿ")]),e._v(" "),a("p",[e._v("ç°åœ¨æˆ‘è¦é—®ç¬¬äºŒä¸ªé—®é¢˜ï¼Œâ€œæ€ä¹ˆè§‚å¯Ÿï¼Ÿâ€")]),e._v(" "),a("p",[e._v("æ€è€ƒä¸€ä¸‹ï¼Œæˆ‘ä»¬ä¹‹æ‰€ä»¥è¦è§‚å¯Ÿä¸€ä¸ªæ•°æ®ï¼Œç›®çš„æ˜¯ä¸ºäº†å½“æ•°æ®çš„å±æ€§å‘ç”Ÿå˜åŒ–æ—¶ï¼Œå¯ä»¥é€šçŸ¥é‚£äº›ä½¿ç”¨äº†è¿™ä¸ª "),a("code",[e._v("key")]),e._v(" çš„åœ°æ–¹ã€‚")]),e._v(" "),a("p",[e._v("ä¸¾ä¸ªğŸŒ°ï¼š")]),e._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("<template>\n  <div>{{ key }}</div>\n  <p>{{ key }}</p>\n</template>\n")])])]),a("p",[e._v("æ¨¡æ¿ä¸­æœ‰ä¸¤å¤„ä½¿ç”¨äº† "),a("code",[e._v("key")]),e._v("ï¼Œæ‰€ä»¥å½“æ•°æ®å‘ç”Ÿå˜åŒ–æ—¶ï¼Œè¦æŠŠè¿™ä¸¤å¤„éƒ½é€šçŸ¥åˆ°ã€‚")]),e._v(" "),a("p",[e._v("æ‰€ä»¥ä¸Šé¢çš„é—®é¢˜ï¼Œæˆ‘çš„å›ç­”æ˜¯ï¼Œå…ˆæ”¶é›†ä¾èµ–ï¼ŒæŠŠè¿™äº›ä½¿ç”¨åˆ° "),a("code",[e._v("key")]),e._v(" çš„åœ°æ–¹å…ˆæ”¶é›†èµ·æ¥ï¼Œç„¶åç­‰å±æ€§å‘ç”Ÿå˜åŒ–æ—¶ï¼ŒæŠŠæ”¶é›†å¥½çš„ä¾èµ–å¾ªç¯è§¦å‘ä¸€éå°±å¥½äº†~")]),e._v(" "),a("p",[e._v("æ€»ç»“èµ·æ¥å…¶å®å°±ä¸€å¥è¯ï¼Œ"),a("strong",[e._v("getterä¸­ï¼Œæ”¶é›†ä¾èµ–ï¼Œsetterä¸­ï¼Œè§¦å‘ä¾èµ–")]),e._v("ã€‚")]),e._v(" "),a("h2",{attrs:{id:"ä¾èµ–æ”¶é›†åœ¨å“ª"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#ä¾èµ–æ”¶é›†åœ¨å“ª"}},[e._v("#")]),e._v(" ä¾èµ–æ”¶é›†åœ¨å“ªï¼Ÿ")]),e._v(" "),a("p",[e._v("ç°åœ¨æˆ‘ä»¬å·²ç»æœ‰äº†å¾ˆæ˜ç¡®çš„ç›®æ ‡ï¼Œå°±æ˜¯è¦åœ¨getterä¸­æ”¶é›†ä¾èµ–ï¼Œé‚£ä¹ˆæˆ‘ä»¬çš„ä¾èµ–æ”¶é›†åˆ°å“ªé‡Œå»å‘¢ï¼Ÿï¼Ÿ")]),e._v(" "),a("p",[e._v("æ€è€ƒä¸€ä¸‹ï¼Œé¦–å…ˆæƒ³åˆ°çš„æ˜¯æ¯ä¸ª "),a("code",[e._v("key")]),e._v(" éƒ½æœ‰ä¸€ä¸ªæ•°ç»„ï¼Œç”¨æ¥å­˜å‚¨å½“å‰ "),a("code",[e._v("key")]),e._v(" çš„ä¾èµ–ï¼Œå‡è®¾ä¾èµ–æ˜¯ä¸€ä¸ªå‡½æ•°å­˜åœ¨ "),a("code",[e._v("window.target")]),e._v(" ä¸Šï¼Œå…ˆæŠŠ "),a("code",[e._v("defineReactive")]),e._v(" ç¨å¾®æ”¹é€ ä¸€ä¸‹ï¼š")]),e._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("function defineReactive (data, key, val) {\n    let dep = [] // æ–°å¢\n    Object.defineProperty(data, key, {\n        enumerable: true,\n        configurable: true,\n        get: function () {\n            dep.push(window.target) // æ–°å¢\n            return val\n        },\n        set: function (newVal) {\n            if(val === newVal){\n                return\n            }\n            \n            // æ–°å¢\n            for (let i = 0; i < dep.length; i++) {\n            \t dep[i](newVal, val)\n            }\n            val = newVal\n        }\n    })\n}\n")])])]),a("p",[e._v("åœ¨ "),a("code",[e._v("defineReactive")]),e._v(" ä¸­æ–°å¢äº†æ•°ç»„ depï¼Œç”¨æ¥å­˜å‚¨è¢«æ”¶é›†çš„ä¾èµ–ã€‚")]),e._v(" "),a("p",[e._v("ç„¶ååœ¨è§¦å‘ set è§¦å‘æ—¶ï¼Œå¾ªç¯depæŠŠæ”¶é›†åˆ°çš„ä¾èµ–è§¦å‘ã€‚")]),e._v(" "),a("p",[e._v("ä½†æ˜¯è¿™æ ·å†™æœ‰ç‚¹è€¦åˆï¼Œæˆ‘ä»¬æŠŠä¾èµ–æ”¶é›†è¿™éƒ¨åˆ†ä»£ç å°è£…èµ·æ¥ï¼Œå†™æˆä¸‹é¢çš„æ ·å­ï¼š")]),e._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("export default class Dep {\n  static target: ?Watcher;\n  id: number;\n  subs: Array<Watcher>;\n\n  constructor () {\n    this.id = uid++\n    this.subs = []\n  }\n\n  addSub (sub: Watcher) {\n    this.subs.push(sub)\n  }\n\n  removeSub (sub: Watcher) {\n    remove(this.subs, sub)\n  }\n\n  depend () {\n    if (Dep.target) {\n      this.addSub(Dep.target)\n    }\n  }\n\n  notify () {\n    // stabilize the subscriber list first\n    const subs = this.subs.slice()\n    for (let i = 0, l = subs.length; i < l; i++) {\n      subs[i].update()\n    }\n  }\n}\n")])])]),a("p",[e._v("ç„¶ååœ¨æ”¹é€ ä¸€ä¸‹ "),a("code",[e._v("defineReactive")]),e._v("ï¼š")]),e._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("function defineReactive (data, key, val) {\n    let dep = new Dep()        // ä¿®æ”¹\n    Object.defineProperty(data, key, {\n        enumerable: true,\n        configurable: true,\n        get: function () {\n            dep.depend() // ä¿®æ”¹\n            return val\n        },\n        set: function (newVal) {\n            if(val === newVal){\n                return\n            }\n\n            dep.notify() // æ–°å¢\n            val = newVal\n        }\n    })\n}\n")])])]),a("p",[e._v("è¿™ä¸€æ¬¡ä»£ç çœ‹èµ·æ¥æ¸…æ™°å¤šäº†ï¼Œé¡ºä¾¿å›ç­”ä¸€ä¸‹ä¸Šé¢é—®çš„é—®é¢˜ï¼Œä¾èµ–æ”¶é›†åˆ°å“ªï¼Ÿæ”¶é›†åˆ°Depä¸­ï¼ŒDepæ˜¯ä¸“é—¨ç”¨æ¥å­˜å‚¨ä¾èµ–çš„ã€‚")]),e._v(" "),a("h2",{attrs:{id:"æ”¶é›†è°"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#æ”¶é›†è°"}},[e._v("#")]),e._v(" æ”¶é›†è°ï¼Ÿ")]),e._v(" "),a("p",[e._v("ä¸Šé¢æˆ‘ä»¬å‡è£… "),a("code",[e._v("window.target")]),e._v(" æ˜¯éœ€è¦è¢«æ”¶é›†çš„ä¾èµ–ï¼Œç»†å¿ƒçš„åŒå­¦å¯èƒ½å·²ç»çœ‹åˆ°ï¼Œä¸Šé¢çš„ä»£ç  "),a("code",[e._v("window.target")]),e._v(" å·²ç»æ”¹æˆäº† "),a("code",[e._v("Dep.target")]),e._v("ï¼Œé‚£ "),a("code",[e._v("Dep.target")]),e._v("æ˜¯ä»€ä¹ˆï¼Ÿæˆ‘ä»¬ç©¶ç«Ÿè¦æ”¶é›†è°å‘¢ï¼Ÿï¼Ÿ")]),e._v(" "),a("p",[e._v("æ”¶é›†è°ï¼Œæ¢å¥è¯è¯´æ˜¯å½“å±æ€§å‘ç”Ÿå˜åŒ–åï¼Œé€šçŸ¥è°ã€‚")]),e._v(" "),a("p",[e._v("æˆ‘ä»¬è¦é€šçŸ¥é‚£ä¸ªä½¿ç”¨åˆ°æ•°æ®çš„åœ°æ–¹ï¼Œè€Œä½¿ç”¨è¿™ä¸ªæ•°æ®çš„åœ°æ–¹æœ‰å¾ˆå¤šï¼Œè€Œä¸”ç±»å‹è¿˜ä¸ä¸€æ ·ï¼Œæœ‰å¯èƒ½æ˜¯æ¨¡æ¿ï¼Œæœ‰å¯èƒ½æ˜¯ç”¨æˆ·å†™çš„ä¸€ä¸ª watchï¼Œæ‰€ä»¥è¿™ä¸ªæ—¶å€™æˆ‘ä»¬éœ€è¦æŠ½è±¡å‡ºä¸€ä¸ªèƒ½é›†ä¸­å¤„ç†è¿™äº›ä¸åŒæƒ…å†µçš„ç±»ï¼Œç„¶åæˆ‘ä»¬åœ¨ä¾èµ–æ”¶é›†çš„é˜¶æ®µåªæ”¶é›†è¿™ä¸ªå°è£…å¥½çš„ç±»çš„å®ä¾‹è¿›æ¥ï¼Œé€šçŸ¥ä¹Ÿåªé€šçŸ¥å®ƒä¸€ä¸ªï¼Œç„¶åå®ƒåœ¨è´Ÿè´£é€šçŸ¥å…¶ä»–åœ°æ–¹ï¼Œæ‰€ä»¥æˆ‘ä»¬è¦æŠ½è±¡çš„è¿™ä¸ªä¸œè¥¿éœ€è¦å…ˆèµ·ä¸€ä¸ªå¥½å¬çš„åå­—ï¼Œå—¯ï¼Œå°±å«å®ƒwatcherå§~")]),e._v(" "),a("p",[e._v("æ‰€ä»¥ç°åœ¨å¯ä»¥å›ç­”ä¸Šé¢çš„é—®é¢˜ï¼Œæ”¶é›†è°ï¼Ÿï¼Ÿæ”¶é›† Watcherã€‚")]),e._v(" "),a("h2",{attrs:{id:"ä»€ä¹ˆæ˜¯watcher"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#ä»€ä¹ˆæ˜¯watcher"}},[e._v("#")]),e._v(" ä»€ä¹ˆæ˜¯Watcherï¼Ÿ")]),e._v(" "),a("p",[e._v("watcher æ˜¯ä¸€ä¸ªä¸­ä»‹çš„è§’è‰²ï¼Œæ•°æ®å‘ç”Ÿå˜åŒ–é€šçŸ¥ç»™ watcherï¼Œç„¶åwatcheråœ¨é€šçŸ¥ç»™å…¶ä»–åœ°æ–¹ã€‚")]),e._v(" "),a("p",[e._v("å…³äºwatcheræˆ‘ä»¬å…ˆçœ‹ä¸€ä¸ªç»å…¸çš„ä½¿ç”¨æ–¹å¼ï¼š")]),e._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("// keypath\nvm.$watch('a.b.c', function (newVal, oldVal) {\n  // do something\n})\n")])])]),a("p",[e._v("è¿™æ®µä»£ç è¡¨ç¤ºå½“ "),a("code",[e._v("data.a.b.c")]),e._v(" è¿™ä¸ªå±æ€§å‘ç”Ÿå˜åŒ–æ—¶ï¼Œè§¦å‘ç¬¬äºŒä¸ªå‚æ•°è¿™ä¸ªå‡½æ•°ã€‚")]),e._v(" "),a("p",[e._v("æ€è€ƒä¸€ä¸‹æ€ä¹ˆå®ç°è¿™ä¸ªåŠŸèƒ½å‘¢ï¼Ÿ")]),e._v(" "),a("p",[e._v("å¥½åƒåªè¦æŠŠè¿™ä¸ª watcher å®ä¾‹æ·»åŠ åˆ° "),a("code",[e._v("data.a.b.c")]),e._v(" è¿™ä¸ªå±æ€§çš„ Dep ä¸­å»å°±è¡Œäº†ï¼Œç„¶å "),a("code",[e._v("data.a.b.c")]),e._v(" è§¦å‘æ—¶ï¼Œä¼šé€šçŸ¥åˆ°watcherï¼Œç„¶åwatcheråœ¨æ‰§è¡Œå‚æ•°ä¸­çš„è¿™ä¸ªå›è°ƒå‡½æ•°ã€‚")]),e._v(" "),a("p",[e._v("å¥½ï¼Œæ€è€ƒå®Œæ¯•ï¼Œå¼€å·¥ï¼Œå†™å‡ºå¦‚ä¸‹ä»£ç ï¼š")]),e._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("class Watch {\n    constructor (expOrFn, cb) {\n        // æ‰§è¡Œ this.getter() å°±å¯ä»¥æ‹¿åˆ° data.a.b.c\n        this.getter = parsePath(expOrFn)\n        this.cb = cb\n        this.value = this.get()\n    }\n\n    get () {\n        Dep.target = this\n        value = this.getter.call(vm, vm)\n        Dep.target = undefined\n    }\n\n    update () {\n        const oldValue = this.value\n        this.value = this.get()\n        this.cb.call(this.vm, this.value, oldValue)\n    }\n}\n")])])]),a("p",[e._v("è¿™æ®µä»£ç å¯ä»¥æŠŠè‡ªå·±ä¸»åŠ¨ "),a("code",[e._v("push")]),e._v(" åˆ° "),a("code",[e._v("data.a.b.c")]),e._v(" çš„ Dep ä¸­å»ã€‚")]),e._v(" "),a("p",[e._v("å› ä¸ºæˆ‘åœ¨ "),a("code",[e._v("get")]),e._v(" è¿™ä¸ªæ–¹æ³•ä¸­ï¼Œå…ˆæŠŠ Dep.traget è®¾ç½®æˆäº† "),a("code",[e._v("this")]),e._v("ï¼Œä¹Ÿå°±æ˜¯å½“å‰watcherå®ä¾‹ï¼Œç„¶ååœ¨è¯»ä¸€ä¸‹ "),a("code",[e._v("data.a.b.c")]),e._v(" çš„å€¼ã€‚")]),e._v(" "),a("p",[e._v("å› ä¸ºè¯»äº† "),a("code",[e._v("data.a.b.c")]),e._v(" çš„å€¼ï¼Œæ‰€ä»¥è‚¯å®šä¼šè§¦å‘ "),a("code",[e._v("getter")]),e._v("ã€‚")]),e._v(" "),a("p",[e._v("è§¦å‘äº† "),a("code",[e._v("getter")]),e._v(" ä¸Šé¢æˆ‘ä»¬å°è£…çš„ "),a("code",[e._v("defineReactive")]),e._v("å‡½æ•°ä¸­æœ‰ä¸€æ®µé€»è¾‘å°±ä¼šä» "),a("code",[e._v("Dep.target")]),e._v(" é‡Œè¯»ä¸€ä¸ªä¾èµ– "),a("code",[e._v("push")]),e._v(" åˆ° "),a("code",[e._v("Dep")]),e._v(" ä¸­ã€‚")]),e._v(" "),a("p",[e._v("æ‰€ä»¥å°±å¯¼è‡´ï¼Œæˆ‘åªè¦å…ˆåœ¨ Dep.target èµ‹ä¸€ä¸ª "),a("code",[e._v("this")]),e._v("ï¼Œç„¶åæˆ‘åœ¨è¯»ä¸€ä¸‹å€¼ï¼Œå»è§¦å‘ä¸€ä¸‹ "),a("code",[e._v("getter")]),e._v("ï¼Œå°±å¯ä»¥æŠŠ "),a("code",[e._v("this")]),e._v(" ä¸»åŠ¨ "),a("code",[e._v("push")]),e._v(" åˆ° "),a("code",[e._v("keypath")]),e._v(" çš„ä¾èµ–ä¸­ï¼Œæœ‰æ²¡æœ‰å¾ˆç¥å¥‡~")]),e._v(" "),a("p",[e._v("ä¾èµ–æ³¨å…¥åˆ° "),a("code",[e._v("Dep")]),e._v(" ä¸­å»ä¹‹åï¼Œå½“è¿™ä¸ª "),a("code",[e._v("data.a.b.c")]),e._v(" çš„å€¼å‘ç”Ÿå˜åŒ–ï¼Œå°±æŠŠæ‰€æœ‰çš„ä¾èµ–å¾ªç¯è§¦å‘ update æ–¹æ³•ï¼Œä¹Ÿå°±æ˜¯ä¸Šé¢ä»£ç ä¸­ update é‚£ä¸ªæ–¹æ³•ã€‚")]),e._v(" "),a("p",[a("code",[e._v("update")]),e._v(" æ–¹æ³•ä¼šè§¦å‘å‚æ•°ä¸­çš„å›è°ƒå‡½æ•°ï¼Œå°†value å’Œ oldValue ä¼ åˆ°å‚æ•°ä¸­ã€‚")]),e._v(" "),a("p",[e._v("æ‰€ä»¥å…¶å®ä¸ç®¡æ˜¯ç”¨æˆ·æ‰§è¡Œçš„ "),a("code",[e._v("vm.$watch('a.b.c', (value, oldValue) => {})")]),e._v(" è¿˜æ˜¯æ¨¡æ¿ä¸­ç”¨åˆ°çš„dataï¼Œéƒ½æ˜¯é€šè¿‡ watcher æ¥é€šçŸ¥è‡ªå·±æ˜¯å¦éœ€è¦å‘ç”Ÿå˜åŒ–çš„ã€‚")]),e._v(" "),a("h2",{attrs:{id:"é€’å½’ä¾¦æµ‹æ‰€æœ‰key"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#é€’å½’ä¾¦æµ‹æ‰€æœ‰key"}},[e._v("#")]),e._v(" é€’å½’ä¾¦æµ‹æ‰€æœ‰key")]),e._v(" "),a("p",[e._v("ç°åœ¨å…¶å®å·²ç»å¯ä»¥å®ç°å˜åŒ–ä¾¦æµ‹çš„åŠŸèƒ½äº†ï¼Œä½†æ˜¯æˆ‘ä»¬ä¹‹å‰å†™çš„ä»£ç åªèƒ½ä¾¦æµ‹æ•°æ®ä¸­çš„ä¸€ä¸ª keyï¼Œæ‰€ä»¥æˆ‘ä»¬è¦åŠ å·¥ä¸€ä¸‹ "),a("code",[e._v("defineReactive")]),e._v(" è¿™ä¸ªå‡½æ•°ï¼š")]),e._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("// æ–°å¢\nfunction walk (obj: Object) {\n  const keys = Object.keys(obj)\n  for (let i = 0; i < keys.length; i++) {\n    defineReactive(obj, keys[i], obj[keys[i]])\n  }\n}\n\nfunction defineReactive (data, key, val) {\n    walk(val) // æ–°å¢\n    let dep = new Dep()\n    Object.defineProperty(data, key, {\n        enumerable: true,\n        configurable: true,\n        get: function () {\n            dep.depend()\n            return val\n        },\n        set: function (newVal) {\n            if(val === newVal){\n                return\n            }\n\n            dep.notify()\n            val = newVal\n        }\n    })\n}\n")])])]),a("p",[e._v("è¿™æ ·æˆ‘ä»¬å°±å¯ä»¥é€šè¿‡æ‰§è¡Œ "),a("code",[e._v("walk(data)")]),e._v("ï¼ŒæŠŠ "),a("code",[e._v("data")]),e._v(" ä¸­çš„æ‰€æœ‰ "),a("code",[e._v("key")]),e._v(" éƒ½åŠ å·¥æˆå¯ä»¥è¢«ä¾¦æµ‹çš„ï¼Œå› ä¸ºæ˜¯ä¸€ä¸ªé€’å½’çš„è¿‡ç¨‹ï¼Œæ‰€ä»¥ "),a("code",[e._v("key")]),e._v(" ä¸­çš„ "),a("code",[e._v("value")]),e._v(" å¦‚æœæ˜¯ä¸€ä¸ªå¯¹è±¡ï¼Œé‚£è¿™ä¸ªå¯¹è±¡çš„æ‰€æœ‰keyä¹Ÿä¼šè¢«ä¾¦æµ‹ã€‚")]),e._v(" "),a("h2",{attrs:{id:"arrayæ€ä¹ˆè¿›è¡Œå˜åŒ–ä¾¦æµ‹"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#arrayæ€ä¹ˆè¿›è¡Œå˜åŒ–ä¾¦æµ‹"}},[e._v("#")]),e._v(" Arrayæ€ä¹ˆè¿›è¡Œå˜åŒ–ä¾¦æµ‹ï¼Ÿ")]),e._v(" "),a("p",[e._v("ç°åœ¨åˆå‘ç°äº†æ–°çš„é—®é¢˜ï¼Œ"),a("code",[e._v("data")]),e._v(" ä¸­ä¸æ˜¯æ‰€æœ‰çš„ "),a("code",[e._v("value")]),e._v(" éƒ½æ˜¯å¯¹è±¡å’ŒåŸºæœ¬ç±»å‹ï¼Œå¦‚æœæ˜¯ä¸€ä¸ªæ•°ç»„æ€ä¹ˆåŠï¼Ÿï¼Ÿæ•°ç»„æ˜¯æ²¡æœ‰åŠæ³•é€šè¿‡ "),a("code",[e._v("Object.defineProperty")]),e._v(" æ¥ä¾¦æµ‹åˆ°è¡Œä¸ºçš„ã€‚")]),e._v(" "),a("p",[e._v("vue ä¸­å¯¹è¿™ä¸ªæ•°ç»„é—®é¢˜çš„è§£å†³æ–¹æ¡ˆéå¸¸çš„ç®€å•ç²—æš´ï¼Œæˆ‘è¯´è¯´vueæ˜¯å¦‚ä½•å®ç°çš„ï¼Œå¤§ä½“ä¸Šåˆ†ä¸‰æ­¥ï¼š")]),e._v(" "),a("p",[e._v("ç¬¬ä¸€æ­¥ï¼šå…ˆæŠŠåŸç”Ÿ "),a("code",[e._v("Array")]),e._v(" çš„åŸå‹æ–¹æ³•ç»§æ‰¿ä¸‹æ¥ã€‚")]),e._v(" "),a("p",[e._v("ç¬¬äºŒæ­¥ï¼šå¯¹ç»§æ‰¿åçš„å¯¹è±¡ä½¿ç”¨ "),a("code",[e._v("Object.defineProperty")]),e._v(" åšä¸€äº›æ‹¦æˆªæ“ä½œã€‚")]),e._v(" "),a("p",[e._v("ç¬¬ä¸‰æ­¥ï¼šæŠŠåŠ å·¥åå¯ä»¥è¢«æ‹¦æˆªçš„åŸå‹ï¼Œèµ‹å€¼åˆ°éœ€è¦è¢«æ‹¦æˆªçš„ "),a("code",[e._v("Array")]),e._v(" ç±»å‹çš„æ•°æ®çš„åŸå‹ä¸Šã€‚")]),e._v(" "),a("p",[a("strong",[e._v("vueçš„å®ç°")])]),e._v(" "),a("p",[e._v("ç¬¬ä¸€æ­¥ï¼š")]),e._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("const arrayProto = Array.prototype\nexport const arrayMethods = Object.create(arrayProto)\n")])])]),a("p",[e._v("ç¬¬äºŒæ­¥ï¼š")]),e._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v(";[\n  'push',\n  'pop',\n  'shift',\n  'unshift',\n  'splice',\n  'sort',\n  'reverse'\n]\n.forEach(function (method) {\n  // cache original method\n  const original = arrayProto[method]\n\n  Object.defineProperty(arrayMethods, method, {\n    value: function mutator (...args) {\n      console.log(method) // æ‰“å°æ•°ç»„æ–¹æ³•\n      return original.apply(this, args)\n    },\n    enumerable: false,\n    writable: true,\n    configurable: true\n  })\n})\n")])])]),a("p",[e._v("ç°åœ¨å¯ä»¥çœ‹åˆ°ï¼Œæ¯å½“è¢«ä¾¦æµ‹çš„ "),a("code",[e._v("array")]),e._v(" æ‰§è¡Œæ–¹æ³•æ“ä½œæ•°ç»„æ—¶ï¼Œæˆ‘éƒ½å¯ä»¥çŸ¥é“ä»–æ‰§è¡Œçš„æ–¹æ³•æ˜¯ä»€ä¹ˆï¼Œå¹¶ä¸”æ‰“å°åˆ° "),a("code",[e._v("console")]),e._v(" ä¸­ã€‚")]),e._v(" "),a("p",[e._v("ç°åœ¨æˆ‘è¦å¯¹è¿™ä¸ªæ•°ç»„æ–¹æ³•ç±»å‹è¿›è¡Œåˆ¤æ–­ï¼Œå¦‚æœæ“ä½œæ•°ç»„çš„æ–¹æ³•æ˜¯ push unshift splice ï¼ˆè¿™ç§å¯ä»¥æ–°å¢æ•°ç»„å…ƒç´ çš„æ–¹æ³•ï¼‰ï¼Œéœ€è¦æŠŠæ–°å¢çš„å…ƒç´ ç”¨ä¸Šé¢å°è£…çš„ "),a("code",[e._v("walk")]),e._v(" æ¥è¿›è¡Œå˜åŒ–æ£€æµ‹ã€‚")]),e._v(" "),a("p",[e._v("å¹¶ä¸”ä¸è®ºæ“ä½œæ•°ç»„çš„æ˜¯ä»€ä¹ˆæ–¹æ³•ï¼Œæˆ‘éƒ½è¦è§¦å‘æ¶ˆæ¯ï¼Œé€šçŸ¥ä¾èµ–åˆ—è¡¨ä¸­çš„ä¾èµ–æ•°æ®å‘ç”Ÿäº†å˜åŒ–ã€‚")]),e._v(" "),a("p",[e._v("é‚£ç°åœ¨æ€ä¹ˆè®¿é—®ä¾èµ–åˆ—è¡¨å‘¢ï¼Œå¯èƒ½æˆ‘ä»¬éœ€è¦æŠŠä¸Šé¢å°è£…çš„ "),a("code",[e._v("walk")]),e._v(" åŠ å·¥ä¸€ä¸‹ï¼š")]),e._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("// å·¥å…·å‡½æ•°\nfunction def (obj: Object, key: string, val: any, enumerable?: boolean) {\n  Object.defineProperty(obj, key, {\n    value: val,\n    enumerable: !!enumerable,\n    writable: true,\n    configurable: true\n  })\n}\n\nexport class Observer {\n  value: any;\n  dep: Dep;\n  vmCount: number; // number of vms that has this object as root $data\n\n  constructor (value: any) {\n    this.value = value\n    this.dep = new Dep() // æ–°å¢\n    this.vmCount = 0\n    def(value, '__ob__', this) // æ–°å¢\n\n    // æ–°å¢\n    if (Array.isArray(value)) {\n      this.observeArray(value)\n    } else {\n      this.walk(value)\n    }\n  }\n\n  /**\n   * Walk through each property and convert them into\n   * getter/setters. This method should only be called when\n   * value type is Object.\n   */\n  walk (obj: Object) {\n    const keys = Object.keys(obj)\n    for (let i = 0; i < keys.length; i++) {\n      defineReactive(obj, keys[i], obj[keys[i]])\n    }\n  }\n\n  /**\n   * Observe a list of Array items.\n   */\n  observeArray (items: Array<any>) {\n    for (let i = 0, l = items.length; i < l; i++) {\n      new Observer(items[i])\n    }\n  }\n}\n")])])]),a("p",[e._v("æˆ‘ä»¬å®šä¹‰äº†ä¸€ä¸ª "),a("code",[e._v("Observer")]),e._v(" ç±»ï¼Œä»–çš„èŒè´£æ˜¯å°† "),a("code",[e._v("data")]),e._v(" è½¬æ¢æˆå¯ä»¥è¢«ä¾¦æµ‹åˆ°å˜åŒ–çš„ "),a("code",[e._v("data")]),e._v("ï¼Œå¹¶ä¸”æ–°å¢äº†å¯¹ç±»å‹çš„åˆ¤æ–­ï¼Œå¦‚æœæ˜¯ "),a("code",[e._v("value")]),e._v(" çš„ç±»å‹æ˜¯ "),a("code",[e._v("Array")]),e._v(" å¾ªç¯ Arrayå°†æ¯ä¸€ä¸ªå…ƒç´ ä¸¢åˆ° Observer ä¸­ã€‚")]),e._v(" "),a("p",[e._v("å¹¶ä¸”åœ¨ value ä¸Šåšäº†ä¸€ä¸ªæ ‡è®° "),a("code",[e._v("__ob__")]),e._v("ï¼Œè¿™æ ·æˆ‘ä»¬å°±å¯ä»¥é€šè¿‡ "),a("code",[e._v("value")]),e._v(" çš„ "),a("code",[e._v("__ob__")]),e._v(" æ‹¿åˆ°Observerå®ä¾‹ï¼Œç„¶åä½¿ç”¨ "),a("code",[e._v("__ob__")]),e._v(" ä¸Šçš„ "),a("code",[e._v("dep.notify()")]),e._v(" å°±å¯ä»¥å‘é€é€šçŸ¥å•¦ã€‚")]),e._v(" "),a("p",[e._v("ç„¶åæˆ‘ä»¬åœ¨æ”¹è¿›ä¸€ä¸‹ArrayåŸå‹çš„æ‹¦æˆªå™¨ï¼š")]),e._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v(";[\n  'push',\n  'pop',\n  'shift',\n  'unshift',\n  'splice',\n  'sort',\n  'reverse'\n]\n.forEach(function (method) {\n  // cache original method\n  const original = arrayProto[method]\n  def(arrayMethods, method, function mutator (...args) {\n    const result = original.apply(this, args)\n    const ob = this.__ob__\n    let inserted\n    switch (method) {\n      case 'push':\n      case 'unshift':\n        inserted = args\n        break\n      case 'splice':\n        inserted = args.slice(2)\n        break\n    }\n    if (inserted) ob.observeArray(inserted)\n    // notify change\n    ob.dep.notify()\n    return result\n  })\n})\n")])])]),a("p",[e._v("å¯ä»¥çœ‹åˆ°å†™äº†ä¸€ä¸ª "),a("code",[e._v("switch")]),e._v(" å¯¹ "),a("code",[e._v("method")]),e._v(" è¿›è¡Œåˆ¤æ–­ï¼Œå¦‚æœæ˜¯ "),a("code",[e._v("push")]),e._v("ï¼Œ"),a("code",[e._v("unshift")]),e._v("ï¼Œ"),a("code",[e._v("splice")]),e._v(" è¿™ç§å¯ä»¥æ–°å¢æ•°ç»„å…ƒç´ çš„æ–¹æ³•å°±ä½¿ç”¨ "),a("code",[e._v("ob.observeArray(inserted)")]),e._v(" æŠŠæ–°å¢çš„å…ƒç´ ä¹Ÿä¸¢åˆ° "),a("code",[e._v("Observer")]),e._v(" ä¸­å»è½¬æ¢æˆå¯ä»¥è¢«ä¾¦æµ‹åˆ°å˜åŒ–çš„æ•°æ®ã€‚")]),e._v(" "),a("p",[e._v("åœ¨æœ€åä¸è®ºæ“ä½œæ•°ç»„çš„æ–¹æ³•æ˜¯ä»€ä¹ˆï¼Œéƒ½ä¼šè°ƒç”¨ "),a("code",[e._v("ob.dep.notify()")]),e._v(" å»é€šçŸ¥ "),a("code",[e._v("watcher")]),e._v(" æ•°æ®å‘ç”Ÿäº†æ”¹å˜ã€‚")]),e._v(" "),a("h2",{attrs:{id:"arraymethods-æ˜¯æ€ä¹ˆç”Ÿæ•ˆçš„"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#arraymethods-æ˜¯æ€ä¹ˆç”Ÿæ•ˆçš„"}},[e._v("#")]),e._v(" arrayMethods æ˜¯æ€ä¹ˆç”Ÿæ•ˆçš„ï¼Ÿ")]),e._v(" "),a("p",[e._v("ç°åœ¨æˆ‘ä»¬æœ‰ä¸€ä¸ª "),a("code",[e._v("arrayMenthods")]),e._v(" æ˜¯è¢«åŠ å·¥åçš„ "),a("code",[e._v("Array.prototype")]),e._v("ï¼Œé‚£ä¹ˆæ€ä¹ˆè®©è¿™ä¸ªå¯¹è±¡åº”ç”¨åˆ°"),a("code",[e._v("Array")]),e._v(" ä¸Šé¢å‘¢ï¼Ÿ")]),e._v(" "),a("p",[e._v("æ€è€ƒä¸€ä¸‹ï¼Œæˆ‘ä»¬ä¸èƒ½ç›´æ¥ä¿®æ”¹ "),a("code",[e._v("Array.prototype")]),e._v("å› ä¸ºè¿™æ ·ä¼šæ±¡æŸ“å…¨å±€çš„Arrayï¼Œæˆ‘ä»¬å¸Œæœ› "),a("code",[e._v("arrayMenthods")]),e._v(" åªå¯¹ "),a("code",[e._v("data")]),e._v("ä¸­çš„"),a("code",[e._v("Array")]),e._v(" ç”Ÿæ•ˆã€‚")]),e._v(" "),a("p",[e._v("æ‰€ä»¥æˆ‘ä»¬åªéœ€è¦æŠŠ "),a("code",[e._v("arrayMenthods")]),e._v(" èµ‹å€¼ç»™ "),a("code",[e._v("value")]),e._v(" çš„ "),a("code",[e._v("__proto__")]),e._v(" ä¸Šå°±å¥½äº†ã€‚")]),e._v(" "),a("p",[e._v("æˆ‘ä»¬æ”¹é€ ä¸€ä¸‹ "),a("code",[e._v("Observer")]),e._v("ï¼š")]),e._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("export class Observer {\n  constructor (value: any) {\n    this.value = value\n    this.dep = new Dep()\n    this.vmCount = 0\n    def(value, '__ob__', this)\n\n    if (Array.isArray(value)) {\n      value.__proto__ = arrayMethods // æ–°å¢\n      this.observeArray(value)\n    } else {\n      this.walk(value)\n    }\n  }\n}\n")])])]),a("p",[e._v("å¦‚æœä¸èƒ½ä½¿ç”¨ "),a("code",[e._v("__proto__")]),e._v("ï¼Œå°±ç›´æ¥å¾ªç¯ "),a("code",[e._v("arrayMethods")]),e._v("æŠŠå®ƒèº«ä¸Šçš„è¿™äº›æ–¹æ³•ç›´æ¥è£…åˆ° "),a("code",[e._v("value")]),e._v(" èº«ä¸Šå¥½äº†ã€‚")]),e._v(" "),a("p",[a("strong",[e._v("ä»€ä¹ˆæƒ…å†µä¸èƒ½ä½¿ç”¨ "),a("code",[e._v("__proto__")]),e._v(" æˆ‘ä¹Ÿä¸çŸ¥é“ï¼Œå„ä½å¤§ä½¬è°çŸ¥é“èƒ½å¦ç»™æˆ‘ç•™ä¸ªè¨€ï¼Ÿè·ªè°¢~")])]),e._v(" "),a("p",[e._v("æ‰€ä»¥æˆ‘ä»¬çš„ä»£ç åˆè¦æ”¹é€ ä¸€ä¸‹ï¼š")]),e._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("// can we use __proto__?\nconst hasProto = '__proto__' in {} // æ–°å¢\nexport class Observer {\n  constructor (value: any) {\n    this.value = value\n    this.dep = new Dep()\n    this.vmCount = 0\n    def(value, '__ob__', this)\n\n    if (Array.isArray(value)) {\n      // ä¿®æ”¹\n      const augment = hasProto\n        ? protoAugment\n        : copyAugment\n      augment(value, arrayMethods, arrayKeys)\n      this.observeArray(value)\n    } else {\n      this.walk(value)\n    }\n  }\n}\n\nfunction protoAugment (target, src: Object, keys: any) {\n  target.__proto__ = src\n}\n\nfunction copyAugment (target: Object, src: Object, keys: Array<string>) {\n  for (let i = 0, l = keys.length; i < l; i++) {\n    const key = keys[i]\n    def(target, key, src[key])\n  }\n}\n")])])]),a("h2",{attrs:{id:"å…³äºarrayçš„é—®é¢˜"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#å…³äºarrayçš„é—®é¢˜"}},[e._v("#")]),e._v(" å…³äºArrayçš„é—®é¢˜")]),e._v(" "),a("p",[e._v("å…³äºvueå¯¹Arrayçš„æ‹¦æˆªå®ç°ä¸Šé¢åˆšè¯´å®Œï¼Œæ­£å› ä¸ºè¿™ç§å®ç°æ–¹å¼ï¼Œå…¶å®æœ‰äº›æ•°ç»„æ“ä½œvueæ˜¯æ‹¦æˆªä¸åˆ°çš„ï¼Œä¾‹å¦‚ï¼š")]),e._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("this.list[0] = 2\n")])])]),a("p",[e._v("ä¿®æ”¹æ•°ç»„ç¬¬ä¸€ä¸ªå…ƒç´ çš„å€¼ï¼Œæ— æ³•ä¾¦æµ‹åˆ°æ•°ç»„çš„å˜åŒ–ï¼Œæ‰€ä»¥å¹¶ä¸ä¼šè§¦å‘ "),a("code",[e._v("re-render")]),e._v(" æˆ– "),a("code",[e._v("watch")]),e._v(" ç­‰ã€‚")]),e._v(" "),a("p",[e._v("åœ¨ä¾‹å¦‚ï¼š")]),e._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("this.list.length = 0\n")])])]),a("p",[e._v("æ¸…ç©ºæ•°ç»„æ“ä½œï¼Œæ— æ³•ä¾¦æµ‹åˆ°æ•°ç»„çš„å˜åŒ–ï¼Œæ‰€ä»¥ä¹Ÿä¸ä¼šè§¦å‘ "),a("code",[e._v("re-render")]),e._v(" æˆ– "),a("code",[e._v("watch")]),e._v(" ç­‰ã€‚")]),e._v(" "),a("p",[e._v("å› ä¸ºvueçš„å®ç°æ–¹å¼å°±å†³å®šäº†æ— æ³•å¯¹ä¸Šé¢ä¸¾å¾—ä¸¤ä¸ªä¾‹å­åšæ‹¦æˆªï¼Œä¹Ÿå°±æ²¡æœ‰åŠæ³•åšåˆ°å“åº”ï¼ŒES6æ˜¯æœ‰èƒ½åŠ›åšåˆ°çš„ï¼Œåœ¨ES6ä¹‹å‰æ˜¯æ— æ³•åšåˆ°æ¨¡æ‹Ÿæ•°ç»„çš„åŸç”Ÿè¡Œä¸ºçš„ï¼Œç°åœ¨ ES6 çš„ Proxy å¯ä»¥æ¨¡æ‹Ÿæ•°ç»„çš„åŸç”Ÿè¡Œä¸ºï¼Œä¹Ÿå¯ä»¥é€šè¿‡ ES6 çš„ç»§æ‰¿æ¥ç»§æ‰¿æ•°ç»„åŸç”Ÿè¡Œä¸ºï¼Œä»è€Œè¿›è¡Œæ‹¦æˆªã€‚")]),e._v(" "),a("h2",{attrs:{id:"æ€»ç»“"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#æ€»ç»“"}},[e._v("#")]),e._v(" æ€»ç»“")]),e._v(" "),a("p",[a("img",{attrs:{src:"defineReactive.assets/data.png",alt:"å“åº”å¼ç»“æ„å›¾"}})]),e._v(" "),a("p",[e._v("æœ€åæå‡ºvueå®˜ç½‘ä¸Šçš„ä¸€å¼ å›¾ï¼Œè¿™å¼ å›¾å…¶å®éå¸¸æ¸…æ™°ï¼Œå°±æ˜¯ä¸€ä¸ªå˜åŒ–ä¾¦æµ‹çš„åŸç†å›¾ã€‚")]),e._v(" "),a("p",[a("code",[e._v("getter")]),e._v(" åˆ° "),a("code",[e._v("watcher")]),e._v(" æœ‰ä¸€æ¡çº¿ï¼Œä¸Šé¢å†™ç€æ”¶é›†ä¾èµ–ï¼Œæ„æ€æ˜¯è¯´ "),a("code",[e._v("getter")]),e._v(" é‡Œæ”¶é›† "),a("code",[e._v("watcher")]),e._v("ï¼Œä¹Ÿå°±æ˜¯è¯´å½“æ•°æ®å‘ç”Ÿ "),a("code",[e._v("get")]),e._v(" åŠ¨ä½œæ—¶å¼€å§‹æ”¶é›† "),a("code",[e._v("watcher")]),e._v("ã€‚")]),e._v(" "),a("p",[a("code",[e._v("setter")]),e._v(" åˆ° "),a("code",[e._v("watcher")]),e._v(" æœ‰ä¸€æ¡çº¿ï¼Œå†™ç€ "),a("code",[e._v("Notify")]),e._v(" æ„æ€æ˜¯è¯´åœ¨ "),a("code",[e._v("setter")]),e._v(" ä¸­è§¦å‘æ¶ˆæ¯ï¼Œä¹Ÿå°±æ˜¯å½“æ•°æ®å‘ç”Ÿ "),a("code",[e._v("set")]),e._v(" åŠ¨ä½œæ—¶ï¼Œé€šçŸ¥ "),a("code",[e._v("watcher")]),e._v("ã€‚")]),e._v(" "),a("p",[a("code",[e._v("Watcher")]),e._v(" åˆ° ComponentRenderFunction æœ‰ä¸€æ¡çº¿ï¼Œå†™ç€ "),a("code",[e._v("Trigger re-render")]),e._v(" æ„æ€å¾ˆæ˜æ˜¾äº†ã€‚")])])}),[],!1,null,null,null);t.default=v.exports}}]);