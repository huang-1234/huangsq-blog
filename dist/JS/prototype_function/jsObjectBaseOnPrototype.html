<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>深刻理解 JavaScript 基于原型的面向对象 Full | H先森</title>
    <meta name="generator" content="VuePress 1.8.2">
    <link rel="icon" href="/favicon.ico">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.11.1/dist/katex.min.css">
    <meta name="description" content="From FE Arch、To Full Stack">
    <meta name="viewport" content="width=device-width,initial-scale=1,user-scalable=no">
    
    <link rel="preload" href="/assets/css/0.styles.e16fe094.css" as="style"><link rel="preload" href="/assets/js/app.f6381760.js" as="script"><link rel="preload" href="/assets/js/3.bc729665.js" as="script"><link rel="preload" href="/assets/js/1.70674a6e.js" as="script"><link rel="preload" href="/assets/js/9.03d2aac8.js" as="script"><link rel="prefetch" href="/assets/js/10.18068c96.js"><link rel="prefetch" href="/assets/js/100.e1fb46c9.js"><link rel="prefetch" href="/assets/js/101.cb721e70.js"><link rel="prefetch" href="/assets/js/102.166f1c09.js"><link rel="prefetch" href="/assets/js/103.4be71131.js"><link rel="prefetch" href="/assets/js/104.7d1e7400.js"><link rel="prefetch" href="/assets/js/105.d7c17bbf.js"><link rel="prefetch" href="/assets/js/106.3b1c07b0.js"><link rel="prefetch" href="/assets/js/107.a6930aa8.js"><link rel="prefetch" href="/assets/js/108.24aefa7c.js"><link rel="prefetch" href="/assets/js/109.858f6640.js"><link rel="prefetch" href="/assets/js/11.d8a15310.js"><link rel="prefetch" href="/assets/js/110.ef21e5b7.js"><link rel="prefetch" href="/assets/js/111.8fa60290.js"><link rel="prefetch" href="/assets/js/112.f2a1b0be.js"><link rel="prefetch" href="/assets/js/113.d0cedb7b.js"><link rel="prefetch" href="/assets/js/114.05de6112.js"><link rel="prefetch" href="/assets/js/115.d02e5be9.js"><link rel="prefetch" href="/assets/js/116.fd30c6ab.js"><link rel="prefetch" href="/assets/js/117.f64ef7c4.js"><link rel="prefetch" href="/assets/js/118.67a63acb.js"><link rel="prefetch" href="/assets/js/119.5b7a3673.js"><link rel="prefetch" href="/assets/js/12.ee9db766.js"><link rel="prefetch" href="/assets/js/120.f2885969.js"><link rel="prefetch" href="/assets/js/121.21a0e828.js"><link rel="prefetch" href="/assets/js/122.c626fd36.js"><link rel="prefetch" href="/assets/js/123.04a189f6.js"><link rel="prefetch" href="/assets/js/124.01e46499.js"><link rel="prefetch" href="/assets/js/125.c20d1c10.js"><link rel="prefetch" href="/assets/js/126.5820cf4e.js"><link rel="prefetch" href="/assets/js/127.80d80a56.js"><link rel="prefetch" href="/assets/js/128.427822a1.js"><link rel="prefetch" href="/assets/js/129.3b1d027c.js"><link rel="prefetch" href="/assets/js/13.11b9aa70.js"><link rel="prefetch" href="/assets/js/130.fe95e8a6.js"><link rel="prefetch" href="/assets/js/131.cf131918.js"><link rel="prefetch" href="/assets/js/132.65e8bcb4.js"><link rel="prefetch" href="/assets/js/133.eaa3486c.js"><link rel="prefetch" href="/assets/js/134.7c72e248.js"><link rel="prefetch" href="/assets/js/135.6b2a243f.js"><link rel="prefetch" href="/assets/js/136.c0bb3a2a.js"><link rel="prefetch" href="/assets/js/137.dcf59c20.js"><link rel="prefetch" href="/assets/js/138.545f3b0a.js"><link rel="prefetch" href="/assets/js/139.02fb0d7c.js"><link rel="prefetch" href="/assets/js/14.0a4942f2.js"><link rel="prefetch" href="/assets/js/140.f25369b5.js"><link rel="prefetch" href="/assets/js/141.c35ed46c.js"><link rel="prefetch" href="/assets/js/142.30812489.js"><link rel="prefetch" href="/assets/js/143.2e55a803.js"><link rel="prefetch" href="/assets/js/144.bb60b599.js"><link rel="prefetch" href="/assets/js/145.47112c0c.js"><link rel="prefetch" href="/assets/js/146.396f2fb6.js"><link rel="prefetch" href="/assets/js/147.6b5d11d8.js"><link rel="prefetch" href="/assets/js/148.1ba14c0c.js"><link rel="prefetch" href="/assets/js/149.c6f041b9.js"><link rel="prefetch" href="/assets/js/15.a11d468b.js"><link rel="prefetch" href="/assets/js/150.86507713.js"><link rel="prefetch" href="/assets/js/151.cf105824.js"><link rel="prefetch" href="/assets/js/152.af212ab9.js"><link rel="prefetch" href="/assets/js/153.8b182dfb.js"><link rel="prefetch" href="/assets/js/154.9e6dc952.js"><link rel="prefetch" href="/assets/js/155.5937decd.js"><link rel="prefetch" href="/assets/js/156.ac6897ff.js"><link rel="prefetch" href="/assets/js/157.bf78fac7.js"><link rel="prefetch" href="/assets/js/158.945fa647.js"><link rel="prefetch" href="/assets/js/159.4c2bb78e.js"><link rel="prefetch" href="/assets/js/16.6d45aadf.js"><link rel="prefetch" href="/assets/js/160.e79bdded.js"><link rel="prefetch" href="/assets/js/161.aee1eef2.js"><link rel="prefetch" href="/assets/js/162.7a16d372.js"><link rel="prefetch" href="/assets/js/163.5594c7d6.js"><link rel="prefetch" href="/assets/js/164.390a1eef.js"><link rel="prefetch" href="/assets/js/165.646f5e26.js"><link rel="prefetch" href="/assets/js/166.862cc4df.js"><link rel="prefetch" href="/assets/js/167.b25bfe3c.js"><link rel="prefetch" href="/assets/js/168.3609c841.js"><link rel="prefetch" href="/assets/js/169.daeb9e70.js"><link rel="prefetch" href="/assets/js/17.1712f082.js"><link rel="prefetch" href="/assets/js/170.7c5b6583.js"><link rel="prefetch" href="/assets/js/171.6508beca.js"><link rel="prefetch" href="/assets/js/172.8c4f0e72.js"><link rel="prefetch" href="/assets/js/173.71f2cf1b.js"><link rel="prefetch" href="/assets/js/174.29ba71bc.js"><link rel="prefetch" href="/assets/js/175.677f28e5.js"><link rel="prefetch" href="/assets/js/176.8f75e76e.js"><link rel="prefetch" href="/assets/js/177.93980159.js"><link rel="prefetch" href="/assets/js/178.f1891bb8.js"><link rel="prefetch" href="/assets/js/179.bd55edbe.js"><link rel="prefetch" href="/assets/js/18.38fa3e95.js"><link rel="prefetch" href="/assets/js/180.1368d46e.js"><link rel="prefetch" href="/assets/js/181.88cc9b21.js"><link rel="prefetch" href="/assets/js/182.a1b60e43.js"><link rel="prefetch" href="/assets/js/183.378930e1.js"><link rel="prefetch" href="/assets/js/184.ca55ac19.js"><link rel="prefetch" href="/assets/js/185.09121ecf.js"><link rel="prefetch" href="/assets/js/186.36c27211.js"><link rel="prefetch" href="/assets/js/187.bec45b28.js"><link rel="prefetch" href="/assets/js/188.b43ad7ba.js"><link rel="prefetch" href="/assets/js/189.13c403dd.js"><link rel="prefetch" href="/assets/js/19.c5078738.js"><link rel="prefetch" href="/assets/js/190.35dd67cf.js"><link rel="prefetch" href="/assets/js/191.e46266b0.js"><link rel="prefetch" href="/assets/js/192.fe7acd1a.js"><link rel="prefetch" href="/assets/js/193.f8ae57e9.js"><link rel="prefetch" href="/assets/js/194.edb04d90.js"><link rel="prefetch" href="/assets/js/195.1d57c0a5.js"><link rel="prefetch" href="/assets/js/196.9e1e0112.js"><link rel="prefetch" href="/assets/js/197.c652ca55.js"><link rel="prefetch" href="/assets/js/198.8ceebb63.js"><link rel="prefetch" href="/assets/js/199.165941f7.js"><link rel="prefetch" href="/assets/js/20.78ec40c2.js"><link rel="prefetch" href="/assets/js/200.1cc9e2e7.js"><link rel="prefetch" href="/assets/js/201.03930b52.js"><link rel="prefetch" href="/assets/js/202.c8e93bdc.js"><link rel="prefetch" href="/assets/js/203.9c8fa06c.js"><link rel="prefetch" href="/assets/js/204.9266f943.js"><link rel="prefetch" href="/assets/js/205.efc6355b.js"><link rel="prefetch" href="/assets/js/206.faeaf758.js"><link rel="prefetch" href="/assets/js/207.b0d0c6e1.js"><link rel="prefetch" href="/assets/js/208.f337a97c.js"><link rel="prefetch" href="/assets/js/209.dd6175e8.js"><link rel="prefetch" href="/assets/js/21.51f6550c.js"><link rel="prefetch" href="/assets/js/210.5f0f7de7.js"><link rel="prefetch" href="/assets/js/211.8c775ff0.js"><link rel="prefetch" href="/assets/js/212.51c6ca01.js"><link rel="prefetch" href="/assets/js/213.905049cc.js"><link rel="prefetch" href="/assets/js/214.5d0de5f9.js"><link rel="prefetch" href="/assets/js/215.bc72dcad.js"><link rel="prefetch" href="/assets/js/216.b970fff8.js"><link rel="prefetch" href="/assets/js/217.01ad47b4.js"><link rel="prefetch" href="/assets/js/218.90e528d1.js"><link rel="prefetch" href="/assets/js/219.1d004099.js"><link rel="prefetch" href="/assets/js/22.1a73e8f3.js"><link rel="prefetch" href="/assets/js/220.c262f6a4.js"><link rel="prefetch" href="/assets/js/221.92f3e5ad.js"><link rel="prefetch" href="/assets/js/222.f43d9b66.js"><link rel="prefetch" href="/assets/js/223.734c862a.js"><link rel="prefetch" href="/assets/js/224.13299910.js"><link rel="prefetch" href="/assets/js/225.f172376d.js"><link rel="prefetch" href="/assets/js/226.20d12987.js"><link rel="prefetch" href="/assets/js/227.33557335.js"><link rel="prefetch" href="/assets/js/228.364225f3.js"><link rel="prefetch" href="/assets/js/229.d7e71f92.js"><link rel="prefetch" href="/assets/js/23.7c21d8cd.js"><link rel="prefetch" href="/assets/js/230.3f7096d2.js"><link rel="prefetch" href="/assets/js/231.11439e62.js"><link rel="prefetch" href="/assets/js/232.8e3b3f61.js"><link rel="prefetch" href="/assets/js/233.9b047c8b.js"><link rel="prefetch" href="/assets/js/234.ad635a9c.js"><link rel="prefetch" href="/assets/js/235.4d080ed0.js"><link rel="prefetch" href="/assets/js/236.fb56bb34.js"><link rel="prefetch" href="/assets/js/237.646061cb.js"><link rel="prefetch" href="/assets/js/238.1baab531.js"><link rel="prefetch" href="/assets/js/239.3da7d7d4.js"><link rel="prefetch" href="/assets/js/24.8ab9733c.js"><link rel="prefetch" href="/assets/js/240.b04b2030.js"><link rel="prefetch" href="/assets/js/241.edeb2a06.js"><link rel="prefetch" href="/assets/js/242.b430961b.js"><link rel="prefetch" href="/assets/js/243.c2a3a293.js"><link rel="prefetch" href="/assets/js/244.44c2e51d.js"><link rel="prefetch" href="/assets/js/245.1458d81c.js"><link rel="prefetch" href="/assets/js/246.e5433e45.js"><link rel="prefetch" href="/assets/js/247.0c14abd9.js"><link rel="prefetch" href="/assets/js/248.ec1ceaf6.js"><link rel="prefetch" href="/assets/js/249.5c85a0c0.js"><link rel="prefetch" href="/assets/js/25.78aa71d0.js"><link rel="prefetch" href="/assets/js/250.a1e946a3.js"><link rel="prefetch" href="/assets/js/251.ca3f364f.js"><link rel="prefetch" href="/assets/js/252.2e29f0f6.js"><link rel="prefetch" href="/assets/js/253.b820b1fc.js"><link rel="prefetch" href="/assets/js/254.ed361583.js"><link rel="prefetch" href="/assets/js/255.3cb5a49e.js"><link rel="prefetch" href="/assets/js/256.6f30e1b0.js"><link rel="prefetch" href="/assets/js/257.f0a64520.js"><link rel="prefetch" href="/assets/js/258.64cc1309.js"><link rel="prefetch" href="/assets/js/259.cd163fe2.js"><link rel="prefetch" href="/assets/js/26.0271902e.js"><link rel="prefetch" href="/assets/js/260.c03dc92d.js"><link rel="prefetch" href="/assets/js/261.38c74661.js"><link rel="prefetch" href="/assets/js/262.f10cdd9d.js"><link rel="prefetch" href="/assets/js/263.42abbe76.js"><link rel="prefetch" href="/assets/js/264.bcd3cac5.js"><link rel="prefetch" href="/assets/js/265.46a08c2c.js"><link rel="prefetch" href="/assets/js/266.ab6fcd3c.js"><link rel="prefetch" href="/assets/js/267.9cacb77e.js"><link rel="prefetch" href="/assets/js/268.0435ba70.js"><link rel="prefetch" href="/assets/js/269.50c74e71.js"><link rel="prefetch" href="/assets/js/27.61086da3.js"><link rel="prefetch" href="/assets/js/270.06f45029.js"><link rel="prefetch" href="/assets/js/271.857953ee.js"><link rel="prefetch" href="/assets/js/272.37c8e2a7.js"><link rel="prefetch" href="/assets/js/273.8aea81af.js"><link rel="prefetch" href="/assets/js/274.a659ac76.js"><link rel="prefetch" href="/assets/js/275.f2e192c1.js"><link rel="prefetch" href="/assets/js/276.5106aa0f.js"><link rel="prefetch" href="/assets/js/277.7592a6b0.js"><link rel="prefetch" href="/assets/js/278.a4b33ee1.js"><link rel="prefetch" href="/assets/js/279.30f2c84f.js"><link rel="prefetch" href="/assets/js/28.70923c68.js"><link rel="prefetch" href="/assets/js/280.25ffb0fa.js"><link rel="prefetch" href="/assets/js/281.50d4e9f3.js"><link rel="prefetch" href="/assets/js/282.c6d06a3f.js"><link rel="prefetch" href="/assets/js/283.6ee259ce.js"><link rel="prefetch" href="/assets/js/284.d8d3e368.js"><link rel="prefetch" href="/assets/js/285.e65f583d.js"><link rel="prefetch" href="/assets/js/286.1a9997e1.js"><link rel="prefetch" href="/assets/js/287.2a23688f.js"><link rel="prefetch" href="/assets/js/288.b1cd1f22.js"><link rel="prefetch" href="/assets/js/289.4f1c7f67.js"><link rel="prefetch" href="/assets/js/29.9c9a47f7.js"><link rel="prefetch" href="/assets/js/290.a9d68240.js"><link rel="prefetch" href="/assets/js/291.dfbb19b4.js"><link rel="prefetch" href="/assets/js/292.4d389b22.js"><link rel="prefetch" href="/assets/js/293.2e1165e6.js"><link rel="prefetch" href="/assets/js/294.b2d77372.js"><link rel="prefetch" href="/assets/js/295.282f3775.js"><link rel="prefetch" href="/assets/js/296.33539b63.js"><link rel="prefetch" href="/assets/js/297.5ab2c5ba.js"><link rel="prefetch" href="/assets/js/298.11553047.js"><link rel="prefetch" href="/assets/js/299.013d98f7.js"><link rel="prefetch" href="/assets/js/30.7e1624e8.js"><link rel="prefetch" href="/assets/js/300.2f7b4713.js"><link rel="prefetch" href="/assets/js/301.701d44e3.js"><link rel="prefetch" href="/assets/js/302.07ee564d.js"><link rel="prefetch" href="/assets/js/303.07b5feb1.js"><link rel="prefetch" href="/assets/js/304.fbb521c4.js"><link rel="prefetch" href="/assets/js/305.0bd790d6.js"><link rel="prefetch" href="/assets/js/306.3c2077f6.js"><link rel="prefetch" href="/assets/js/307.03280b02.js"><link rel="prefetch" href="/assets/js/308.922daf0b.js"><link rel="prefetch" href="/assets/js/309.95d4bca7.js"><link rel="prefetch" href="/assets/js/31.8fc361ed.js"><link rel="prefetch" href="/assets/js/310.4c204dbf.js"><link rel="prefetch" href="/assets/js/311.1521c2b4.js"><link rel="prefetch" href="/assets/js/312.0224fdf5.js"><link rel="prefetch" href="/assets/js/313.93cd9a70.js"><link rel="prefetch" href="/assets/js/314.13a0b305.js"><link rel="prefetch" href="/assets/js/315.d4e3f66f.js"><link rel="prefetch" href="/assets/js/316.03a36a13.js"><link rel="prefetch" href="/assets/js/317.0bb3d592.js"><link rel="prefetch" href="/assets/js/318.fd71bd17.js"><link rel="prefetch" href="/assets/js/319.ceefb359.js"><link rel="prefetch" href="/assets/js/32.232c6e7c.js"><link rel="prefetch" href="/assets/js/320.6286aec2.js"><link rel="prefetch" href="/assets/js/321.121769a1.js"><link rel="prefetch" href="/assets/js/322.8f0b3db0.js"><link rel="prefetch" href="/assets/js/323.3be37fdb.js"><link rel="prefetch" href="/assets/js/324.15b633bb.js"><link rel="prefetch" href="/assets/js/325.a3c7bd46.js"><link rel="prefetch" href="/assets/js/326.830adc20.js"><link rel="prefetch" href="/assets/js/327.e5b57d97.js"><link rel="prefetch" href="/assets/js/328.5a7ee153.js"><link rel="prefetch" href="/assets/js/329.01e2e3ef.js"><link rel="prefetch" href="/assets/js/33.033f70d2.js"><link rel="prefetch" href="/assets/js/330.16563c2d.js"><link rel="prefetch" href="/assets/js/331.a1a36530.js"><link rel="prefetch" href="/assets/js/332.9096213f.js"><link rel="prefetch" href="/assets/js/333.7fbbc435.js"><link rel="prefetch" href="/assets/js/334.d12979f1.js"><link rel="prefetch" href="/assets/js/335.822b9895.js"><link rel="prefetch" href="/assets/js/336.441857e6.js"><link rel="prefetch" href="/assets/js/337.0715aced.js"><link rel="prefetch" href="/assets/js/338.ba8169ee.js"><link rel="prefetch" href="/assets/js/339.27e62e4c.js"><link rel="prefetch" href="/assets/js/34.e39cd416.js"><link rel="prefetch" href="/assets/js/340.b75c9f1f.js"><link rel="prefetch" href="/assets/js/341.088a0301.js"><link rel="prefetch" href="/assets/js/342.4d6628a9.js"><link rel="prefetch" href="/assets/js/343.452fdb55.js"><link rel="prefetch" href="/assets/js/344.4c13e4cc.js"><link rel="prefetch" href="/assets/js/345.eb168c7c.js"><link rel="prefetch" href="/assets/js/346.bec8b312.js"><link rel="prefetch" href="/assets/js/347.338a4682.js"><link rel="prefetch" href="/assets/js/348.6735352b.js"><link rel="prefetch" href="/assets/js/349.b9c460ef.js"><link rel="prefetch" href="/assets/js/35.5559c1a8.js"><link rel="prefetch" href="/assets/js/350.f74c891d.js"><link rel="prefetch" href="/assets/js/351.6bf7facd.js"><link rel="prefetch" href="/assets/js/352.af000f01.js"><link rel="prefetch" href="/assets/js/353.6c55d5d4.js"><link rel="prefetch" href="/assets/js/354.8afd0b66.js"><link rel="prefetch" href="/assets/js/355.bd23ddee.js"><link rel="prefetch" href="/assets/js/356.ee1c1b71.js"><link rel="prefetch" href="/assets/js/357.a5e71bad.js"><link rel="prefetch" href="/assets/js/358.52444e65.js"><link rel="prefetch" href="/assets/js/359.05c765d0.js"><link rel="prefetch" href="/assets/js/36.1d2496f0.js"><link rel="prefetch" href="/assets/js/360.b0ada81c.js"><link rel="prefetch" href="/assets/js/361.173c8a25.js"><link rel="prefetch" href="/assets/js/362.844d649a.js"><link rel="prefetch" href="/assets/js/363.e66c7d12.js"><link rel="prefetch" href="/assets/js/364.5134b445.js"><link rel="prefetch" href="/assets/js/365.c109b6a1.js"><link rel="prefetch" href="/assets/js/366.9875e76f.js"><link rel="prefetch" href="/assets/js/367.459e9835.js"><link rel="prefetch" href="/assets/js/368.51f91a7b.js"><link rel="prefetch" href="/assets/js/369.a4ba1387.js"><link rel="prefetch" href="/assets/js/37.8dc251c7.js"><link rel="prefetch" href="/assets/js/370.4280054c.js"><link rel="prefetch" href="/assets/js/371.4ec649aa.js"><link rel="prefetch" href="/assets/js/372.b73b2881.js"><link rel="prefetch" href="/assets/js/373.c430a63b.js"><link rel="prefetch" href="/assets/js/374.5ba8f770.js"><link rel="prefetch" href="/assets/js/375.1cd6fa88.js"><link rel="prefetch" href="/assets/js/376.0de7b11d.js"><link rel="prefetch" href="/assets/js/377.0325c5fc.js"><link rel="prefetch" href="/assets/js/378.bf0b8944.js"><link rel="prefetch" href="/assets/js/379.4c7b9cdd.js"><link rel="prefetch" href="/assets/js/38.6438c0a0.js"><link rel="prefetch" href="/assets/js/380.0a8b4043.js"><link rel="prefetch" href="/assets/js/381.9c759b20.js"><link rel="prefetch" href="/assets/js/382.e1080016.js"><link rel="prefetch" href="/assets/js/383.b579f2ae.js"><link rel="prefetch" href="/assets/js/384.2af4a536.js"><link rel="prefetch" href="/assets/js/385.2d4dab0e.js"><link rel="prefetch" href="/assets/js/386.f4c456fe.js"><link rel="prefetch" href="/assets/js/387.6a3aad69.js"><link rel="prefetch" href="/assets/js/388.47d52578.js"><link rel="prefetch" href="/assets/js/389.3320663c.js"><link rel="prefetch" href="/assets/js/39.d0dadbd9.js"><link rel="prefetch" href="/assets/js/390.dd455eb2.js"><link rel="prefetch" href="/assets/js/391.21fe8054.js"><link rel="prefetch" href="/assets/js/392.3ecbca10.js"><link rel="prefetch" href="/assets/js/393.ec66ff6a.js"><link rel="prefetch" href="/assets/js/394.cb818274.js"><link rel="prefetch" href="/assets/js/395.42d5c3e2.js"><link rel="prefetch" href="/assets/js/396.7471becb.js"><link rel="prefetch" href="/assets/js/397.eae0734f.js"><link rel="prefetch" href="/assets/js/398.bfcb4113.js"><link rel="prefetch" href="/assets/js/399.43fb4bc9.js"><link rel="prefetch" href="/assets/js/4.9cf135a6.js"><link rel="prefetch" href="/assets/js/40.9fbfe4ed.js"><link rel="prefetch" href="/assets/js/400.b01913c5.js"><link rel="prefetch" href="/assets/js/401.5adf1583.js"><link rel="prefetch" href="/assets/js/402.c33394f7.js"><link rel="prefetch" href="/assets/js/403.e29379bf.js"><link rel="prefetch" href="/assets/js/404.45baaeb3.js"><link rel="prefetch" href="/assets/js/405.fcb814d1.js"><link rel="prefetch" href="/assets/js/406.934f369d.js"><link rel="prefetch" href="/assets/js/407.68b012a2.js"><link rel="prefetch" href="/assets/js/408.40ccdc50.js"><link rel="prefetch" href="/assets/js/409.186bbe61.js"><link rel="prefetch" href="/assets/js/41.0754d2d6.js"><link rel="prefetch" href="/assets/js/410.71396f5c.js"><link rel="prefetch" href="/assets/js/411.9cfd0f01.js"><link rel="prefetch" href="/assets/js/412.1dc2900d.js"><link rel="prefetch" href="/assets/js/413.a0bfe4be.js"><link rel="prefetch" href="/assets/js/414.aa970e29.js"><link rel="prefetch" href="/assets/js/415.cc6d9790.js"><link rel="prefetch" href="/assets/js/416.cbda1178.js"><link rel="prefetch" href="/assets/js/417.c388f606.js"><link rel="prefetch" href="/assets/js/418.7e545a2c.js"><link rel="prefetch" href="/assets/js/419.3f24286f.js"><link rel="prefetch" href="/assets/js/42.a833cc15.js"><link rel="prefetch" href="/assets/js/420.cc4af504.js"><link rel="prefetch" href="/assets/js/421.f49ad075.js"><link rel="prefetch" href="/assets/js/422.8a027b64.js"><link rel="prefetch" href="/assets/js/423.3dc7bbd2.js"><link rel="prefetch" href="/assets/js/424.72a99cd8.js"><link rel="prefetch" href="/assets/js/425.b1099008.js"><link rel="prefetch" href="/assets/js/426.aaa9132f.js"><link rel="prefetch" href="/assets/js/427.362bbd23.js"><link rel="prefetch" href="/assets/js/428.0a22669f.js"><link rel="prefetch" href="/assets/js/429.f14b2c26.js"><link rel="prefetch" href="/assets/js/43.512279cc.js"><link rel="prefetch" href="/assets/js/430.32cca260.js"><link rel="prefetch" href="/assets/js/431.215c0f94.js"><link rel="prefetch" href="/assets/js/432.96124657.js"><link rel="prefetch" href="/assets/js/433.58461e39.js"><link rel="prefetch" href="/assets/js/434.10464f95.js"><link rel="prefetch" href="/assets/js/435.1cbf4c2d.js"><link rel="prefetch" href="/assets/js/436.089b488d.js"><link rel="prefetch" href="/assets/js/437.09c7e15d.js"><link rel="prefetch" href="/assets/js/438.7001930c.js"><link rel="prefetch" href="/assets/js/439.b548ea28.js"><link rel="prefetch" href="/assets/js/44.5c1fb15b.js"><link rel="prefetch" href="/assets/js/440.68196345.js"><link rel="prefetch" href="/assets/js/441.e5a36a8b.js"><link rel="prefetch" href="/assets/js/442.78157115.js"><link rel="prefetch" href="/assets/js/443.068036a2.js"><link rel="prefetch" href="/assets/js/444.b2484244.js"><link rel="prefetch" href="/assets/js/445.b0d2e06c.js"><link rel="prefetch" href="/assets/js/446.188cc830.js"><link rel="prefetch" href="/assets/js/447.08fd1aea.js"><link rel="prefetch" href="/assets/js/448.9c02532b.js"><link rel="prefetch" href="/assets/js/449.c24d2abe.js"><link rel="prefetch" href="/assets/js/45.d52f429f.js"><link rel="prefetch" href="/assets/js/450.b5483972.js"><link rel="prefetch" href="/assets/js/451.0c26868f.js"><link rel="prefetch" href="/assets/js/452.b02769a5.js"><link rel="prefetch" href="/assets/js/453.caf6b7fc.js"><link rel="prefetch" href="/assets/js/454.bc8f092a.js"><link rel="prefetch" href="/assets/js/455.adeed847.js"><link rel="prefetch" href="/assets/js/456.d4e79232.js"><link rel="prefetch" href="/assets/js/457.2a28122c.js"><link rel="prefetch" href="/assets/js/458.d8c33243.js"><link rel="prefetch" href="/assets/js/459.e6256cf2.js"><link rel="prefetch" href="/assets/js/46.22324749.js"><link rel="prefetch" href="/assets/js/460.535e0bba.js"><link rel="prefetch" href="/assets/js/461.05e3428e.js"><link rel="prefetch" href="/assets/js/462.d6d14df6.js"><link rel="prefetch" href="/assets/js/463.80cf6ab2.js"><link rel="prefetch" href="/assets/js/464.38a1ebea.js"><link rel="prefetch" href="/assets/js/465.15e7f8e1.js"><link rel="prefetch" href="/assets/js/466.980cffdb.js"><link rel="prefetch" href="/assets/js/467.203d4d73.js"><link rel="prefetch" href="/assets/js/468.a1269d88.js"><link rel="prefetch" href="/assets/js/469.a31439c0.js"><link rel="prefetch" href="/assets/js/47.6bbfc7b5.js"><link rel="prefetch" href="/assets/js/470.6bef8ab8.js"><link rel="prefetch" href="/assets/js/471.9d48774c.js"><link rel="prefetch" href="/assets/js/472.e38f0090.js"><link rel="prefetch" href="/assets/js/473.3ff6a913.js"><link rel="prefetch" href="/assets/js/474.d392d410.js"><link rel="prefetch" href="/assets/js/475.b9e18c0d.js"><link rel="prefetch" href="/assets/js/476.255f8b49.js"><link rel="prefetch" href="/assets/js/477.28081192.js"><link rel="prefetch" href="/assets/js/478.02b01895.js"><link rel="prefetch" href="/assets/js/479.c592e6b3.js"><link rel="prefetch" href="/assets/js/48.02f54e2e.js"><link rel="prefetch" href="/assets/js/480.ff734137.js"><link rel="prefetch" href="/assets/js/481.d9a31538.js"><link rel="prefetch" href="/assets/js/482.79e7605f.js"><link rel="prefetch" href="/assets/js/483.83392312.js"><link rel="prefetch" href="/assets/js/484.db505e09.js"><link rel="prefetch" href="/assets/js/485.9e116217.js"><link rel="prefetch" href="/assets/js/486.8b153819.js"><link rel="prefetch" href="/assets/js/487.b933c35e.js"><link rel="prefetch" href="/assets/js/488.51cb7bde.js"><link rel="prefetch" href="/assets/js/489.f98993f9.js"><link rel="prefetch" href="/assets/js/49.4ca48719.js"><link rel="prefetch" href="/assets/js/490.1e6be4f3.js"><link rel="prefetch" href="/assets/js/491.54f36df0.js"><link rel="prefetch" href="/assets/js/492.66ff0b1d.js"><link rel="prefetch" href="/assets/js/493.a3dcc326.js"><link rel="prefetch" href="/assets/js/494.f58da7e2.js"><link rel="prefetch" href="/assets/js/495.fd089d09.js"><link rel="prefetch" href="/assets/js/496.185348c3.js"><link rel="prefetch" href="/assets/js/497.7b7a4d20.js"><link rel="prefetch" href="/assets/js/498.36728b4b.js"><link rel="prefetch" href="/assets/js/499.ee5d5716.js"><link rel="prefetch" href="/assets/js/5.10f74df8.js"><link rel="prefetch" href="/assets/js/50.5a528fd6.js"><link rel="prefetch" href="/assets/js/500.ebe0dbbc.js"><link rel="prefetch" href="/assets/js/501.f6e92cd9.js"><link rel="prefetch" href="/assets/js/502.2232ed03.js"><link rel="prefetch" href="/assets/js/503.defb262c.js"><link rel="prefetch" href="/assets/js/504.56db343b.js"><link rel="prefetch" href="/assets/js/505.b9dbd6ec.js"><link rel="prefetch" href="/assets/js/506.c6214337.js"><link rel="prefetch" href="/assets/js/507.ae81be2f.js"><link rel="prefetch" href="/assets/js/508.11dcb519.js"><link rel="prefetch" href="/assets/js/509.82f71a57.js"><link rel="prefetch" href="/assets/js/51.14101dc5.js"><link rel="prefetch" href="/assets/js/510.c0de1e0d.js"><link rel="prefetch" href="/assets/js/511.bad4f0fb.js"><link rel="prefetch" href="/assets/js/512.36fe62a8.js"><link rel="prefetch" href="/assets/js/513.bcaf5ad4.js"><link rel="prefetch" href="/assets/js/514.e2f32001.js"><link rel="prefetch" href="/assets/js/515.6d02c37f.js"><link rel="prefetch" href="/assets/js/516.66f165fb.js"><link rel="prefetch" href="/assets/js/517.7d1a058d.js"><link rel="prefetch" href="/assets/js/518.16249eb1.js"><link rel="prefetch" href="/assets/js/519.76d30727.js"><link rel="prefetch" href="/assets/js/52.45686e8f.js"><link rel="prefetch" href="/assets/js/520.63ec6159.js"><link rel="prefetch" href="/assets/js/521.332f1aad.js"><link rel="prefetch" href="/assets/js/522.58ad9961.js"><link rel="prefetch" href="/assets/js/523.b95b0364.js"><link rel="prefetch" href="/assets/js/524.7b2ae338.js"><link rel="prefetch" href="/assets/js/525.c8083e8a.js"><link rel="prefetch" href="/assets/js/526.483ad5fb.js"><link rel="prefetch" href="/assets/js/527.5ff4e854.js"><link rel="prefetch" href="/assets/js/528.ec482f5f.js"><link rel="prefetch" href="/assets/js/529.fb4f8a8f.js"><link rel="prefetch" href="/assets/js/53.f10f0378.js"><link rel="prefetch" href="/assets/js/530.29759d1d.js"><link rel="prefetch" href="/assets/js/531.ed783716.js"><link rel="prefetch" href="/assets/js/532.8168b3a8.js"><link rel="prefetch" href="/assets/js/533.6012984e.js"><link rel="prefetch" href="/assets/js/534.f7983d71.js"><link rel="prefetch" href="/assets/js/535.ad11899a.js"><link rel="prefetch" href="/assets/js/536.6123e767.js"><link rel="prefetch" href="/assets/js/537.f3f70496.js"><link rel="prefetch" href="/assets/js/538.faf7f3d6.js"><link rel="prefetch" href="/assets/js/539.884d4b20.js"><link rel="prefetch" href="/assets/js/54.07f5c6fa.js"><link rel="prefetch" href="/assets/js/540.f5646f48.js"><link rel="prefetch" href="/assets/js/541.98ad279b.js"><link rel="prefetch" href="/assets/js/55.2eb91ab5.js"><link rel="prefetch" href="/assets/js/56.a6cc4a42.js"><link rel="prefetch" href="/assets/js/57.69fd32bb.js"><link rel="prefetch" href="/assets/js/58.111c3525.js"><link rel="prefetch" href="/assets/js/59.8b5c19bf.js"><link rel="prefetch" href="/assets/js/6.c88ff3b3.js"><link rel="prefetch" href="/assets/js/60.17ca08bf.js"><link rel="prefetch" href="/assets/js/61.db4999dd.js"><link rel="prefetch" href="/assets/js/62.584ed745.js"><link rel="prefetch" href="/assets/js/63.12a74589.js"><link rel="prefetch" href="/assets/js/64.bb88f681.js"><link rel="prefetch" href="/assets/js/65.ae43f27b.js"><link rel="prefetch" href="/assets/js/66.c0c8de77.js"><link rel="prefetch" href="/assets/js/67.6ce5557e.js"><link rel="prefetch" href="/assets/js/68.4b62ee75.js"><link rel="prefetch" href="/assets/js/69.dfa6f4c7.js"><link rel="prefetch" href="/assets/js/7.079dae5b.js"><link rel="prefetch" href="/assets/js/70.ab3a96a5.js"><link rel="prefetch" href="/assets/js/71.9884327d.js"><link rel="prefetch" href="/assets/js/72.817249cb.js"><link rel="prefetch" href="/assets/js/73.1df27236.js"><link rel="prefetch" href="/assets/js/74.aa6ab223.js"><link rel="prefetch" href="/assets/js/75.3a989188.js"><link rel="prefetch" href="/assets/js/76.c770577b.js"><link rel="prefetch" href="/assets/js/77.d572f885.js"><link rel="prefetch" href="/assets/js/78.78ca90ff.js"><link rel="prefetch" href="/assets/js/79.ad6aaa0f.js"><link rel="prefetch" href="/assets/js/8.44bf364c.js"><link rel="prefetch" href="/assets/js/80.04c624f0.js"><link rel="prefetch" href="/assets/js/81.b6831bbb.js"><link rel="prefetch" href="/assets/js/82.fb3fddc3.js"><link rel="prefetch" href="/assets/js/83.5074e0c7.js"><link rel="prefetch" href="/assets/js/84.36de2e3d.js"><link rel="prefetch" href="/assets/js/85.f4e8e73d.js"><link rel="prefetch" href="/assets/js/86.b4a0075e.js"><link rel="prefetch" href="/assets/js/87.70ff4f23.js"><link rel="prefetch" href="/assets/js/88.4090d0ca.js"><link rel="prefetch" href="/assets/js/89.7fe4cdcc.js"><link rel="prefetch" href="/assets/js/90.d4d16c69.js"><link rel="prefetch" href="/assets/js/91.bbb484c8.js"><link rel="prefetch" href="/assets/js/92.6e108dbe.js"><link rel="prefetch" href="/assets/js/93.6a7a82a4.js"><link rel="prefetch" href="/assets/js/94.25629b75.js"><link rel="prefetch" href="/assets/js/95.1121854b.js"><link rel="prefetch" href="/assets/js/96.711893e8.js"><link rel="prefetch" href="/assets/js/97.b650e1e7.js"><link rel="prefetch" href="/assets/js/98.75aaa1ff.js"><link rel="prefetch" href="/assets/js/99.69cc90d8.js">
    <link rel="stylesheet" href="/assets/css/0.styles.e16fe094.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container" data-v-1156296a><div data-v-1156296a><div id="loader-wrapper" class="loading-wrapper" data-v-d48f4d20 data-v-1156296a data-v-1156296a><div class="loader-main" data-v-d48f4d20><div data-v-d48f4d20></div><div data-v-d48f4d20></div><div data-v-d48f4d20></div><div data-v-d48f4d20></div></div> <!----> <!----></div> <div class="password-shadow password-wrapper-out" style="display:none;" data-v-4e82dffc data-v-1156296a data-v-1156296a><h3 class="title" data-v-4e82dffc data-v-4e82dffc>H先森</h3> <p class="description" data-v-4e82dffc data-v-4e82dffc>From FE Arch、To Full Stack</p> <label id="box" class="inputBox" data-v-4e82dffc data-v-4e82dffc><input type="password" value="" data-v-4e82dffc> <span data-v-4e82dffc>Konck! Knock!</span> <button data-v-4e82dffc>OK</button></label> <div class="footer" data-v-4e82dffc data-v-4e82dffc><span data-v-4e82dffc><i class="iconfont reco-theme" data-v-4e82dffc></i> <a target="blank" href="https://vuepress-theme-reco.recoluan.com" data-v-4e82dffc>vuePress-theme-reco</a></span> <span data-v-4e82dffc><i class="iconfont reco-copyright" data-v-4e82dffc></i> <a data-v-4e82dffc><span data-v-4e82dffc>huangsq</span>
            
          <!---->
          2021
        </a></span></div></div> <div class="hide" data-v-1156296a><header class="navbar" data-v-1156296a><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><img src="/me.jpg" alt="H先森" class="logo"> <span class="site-name">H先森</span></a> <div class="links"><div class="color-picker"><a class="color-button"><i class="iconfont reco-color"></i></a> <div class="color-picker-menu" style="display:none;"><div class="mode-options"><h4 class="title">Choose mode</h4> <ul class="color-mode-options"><li class="dark">dark</li><li class="auto active">auto</li><li class="light">light</li></ul></div></div></div> <div class="search-box"><i class="iconfont reco-search"></i> <input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title"><i class="undefined"></i>
      FE
    </span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/JS/" class="nav-link router-link-active"><i class="undefined"></i>
  JS
</a></li><li class="dropdown-item"><!----> <a href="/HTML/" class="nav-link"><i class="undefined"></i>
  HTML
</a></li><li class="dropdown-item"><!----> <a href="/Styles/" class="nav-link"><i class="undefined"></i>
  Styles
</a></li><li class="dropdown-item"><!----> <a href="/TS/" class="nav-link"><i class="undefined"></i>
  TS
</a></li><li class="dropdown-item"><h4>Browser</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/BrowserCore/" class="nav-link"><i class="undefined"></i>
  BrCore(MP)
</a></li><li class="dropdown-subitem"><a href="/BrowserModel/" class="nav-link"><i class="undefined"></i>
  BrModel(MT)
</a></li></ul></li><li class="dropdown-item"><h4>Web</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/WebAPI/" class="nav-link"><i class="undefined"></i>
  WebAPI
</a></li><li class="dropdown-subitem"><a href="/WebStandard/" class="nav-link"><i class="undefined"></i>
  WebStandard
</a></li></ul></li><li class="dropdown-item"><h4>JQuery</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/JQuery/" class="nav-link"><i class="undefined"></i>
  JQueryBase
</a></li></ul></li><li class="dropdown-item"><h4>Angular</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/Angular/" class="nav-link"><i class="undefined"></i>
  AngularBase
</a></li></ul></li><li class="dropdown-item"><h4>React</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/React/" class="nav-link"><i class="undefined"></i>
  ReactBase
</a></li></ul></li><li class="dropdown-item"><h4>Vue</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/Vue/" class="nav-link"><i class="undefined"></i>
  VueBase
</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title"><i class="undefined"></i>
      BE
    </span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>Nodejs</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/BE/" class="nav-link"><i class="undefined"></i>
  NodeBase
</a></li></ul></li><li class="dropdown-item"><h4>cPlus</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/Cplus/" class="nav-link"><i class="undefined"></i>
  cPlus
</a></li></ul></li><li class="dropdown-item"><h4>Go</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/Go/" class="nav-link"><i class="undefined"></i>
  Go
</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title"><i class="undefined"></i>
      Proj
    </span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/Project/" class="nav-link"><i class="undefined"></i>
  Project
</a></li><li class="dropdown-item"><h4>toolsForProject</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/Tools/" class="nav-link"><i class="undefined"></i>
  Git&amp;webpack
</a></li></ul></li><li class="dropdown-item"><h4>other-ology</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/OtherOlogy/" class="nav-link"><i class="undefined"></i>
  English
</a></li></ul></li><li class="dropdown-item"><h4>W</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/Interface/" class="nav-link"><i class="undefined"></i>
  interfaceEx
</a></li></ul></li><li class="dropdown-item"><h4>AI</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/AlgorithmAI/" class="nav-link"><i class="undefined"></i>
  AI
</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title"><i class="undefined"></i>
      csBase
    </span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/CSBase/" class="nav-link"><i class="undefined"></i>
  CSBase
</a></li></ul></div></div> <!----></nav></div></header> <div class="sidebar-mask" data-v-1156296a></div> <aside class="sidebar" data-v-1156296a><div class="personal-info-wrapper" data-v-828910c6 data-v-1156296a><img src="/me.jpg" alt="author-avatar" class="personal-img" data-v-828910c6> <h3 class="name" data-v-828910c6>
    huangsq
  </h3> <div class="num" data-v-828910c6><div data-v-828910c6><h3 data-v-828910c6>507</h3> <h6 data-v-828910c6>Articles</h6></div> <div data-v-828910c6><h3 data-v-828910c6>0</h3> <h6 data-v-828910c6>Tags</h6></div></div> <ul class="social-links" data-v-828910c6></ul> <hr data-v-828910c6></div> <nav class="nav-links"><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title"><i class="undefined"></i>
      FE
    </span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/JS/" class="nav-link router-link-active"><i class="undefined"></i>
  JS
</a></li><li class="dropdown-item"><!----> <a href="/HTML/" class="nav-link"><i class="undefined"></i>
  HTML
</a></li><li class="dropdown-item"><!----> <a href="/Styles/" class="nav-link"><i class="undefined"></i>
  Styles
</a></li><li class="dropdown-item"><!----> <a href="/TS/" class="nav-link"><i class="undefined"></i>
  TS
</a></li><li class="dropdown-item"><h4>Browser</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/BrowserCore/" class="nav-link"><i class="undefined"></i>
  BrCore(MP)
</a></li><li class="dropdown-subitem"><a href="/BrowserModel/" class="nav-link"><i class="undefined"></i>
  BrModel(MT)
</a></li></ul></li><li class="dropdown-item"><h4>Web</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/WebAPI/" class="nav-link"><i class="undefined"></i>
  WebAPI
</a></li><li class="dropdown-subitem"><a href="/WebStandard/" class="nav-link"><i class="undefined"></i>
  WebStandard
</a></li></ul></li><li class="dropdown-item"><h4>JQuery</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/JQuery/" class="nav-link"><i class="undefined"></i>
  JQueryBase
</a></li></ul></li><li class="dropdown-item"><h4>Angular</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/Angular/" class="nav-link"><i class="undefined"></i>
  AngularBase
</a></li></ul></li><li class="dropdown-item"><h4>React</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/React/" class="nav-link"><i class="undefined"></i>
  ReactBase
</a></li></ul></li><li class="dropdown-item"><h4>Vue</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/Vue/" class="nav-link"><i class="undefined"></i>
  VueBase
</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title"><i class="undefined"></i>
      BE
    </span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>Nodejs</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/BE/" class="nav-link"><i class="undefined"></i>
  NodeBase
</a></li></ul></li><li class="dropdown-item"><h4>cPlus</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/Cplus/" class="nav-link"><i class="undefined"></i>
  cPlus
</a></li></ul></li><li class="dropdown-item"><h4>Go</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/Go/" class="nav-link"><i class="undefined"></i>
  Go
</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title"><i class="undefined"></i>
      Proj
    </span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/Project/" class="nav-link"><i class="undefined"></i>
  Project
</a></li><li class="dropdown-item"><h4>toolsForProject</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/Tools/" class="nav-link"><i class="undefined"></i>
  Git&amp;webpack
</a></li></ul></li><li class="dropdown-item"><h4>other-ology</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/OtherOlogy/" class="nav-link"><i class="undefined"></i>
  English
</a></li></ul></li><li class="dropdown-item"><h4>W</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/Interface/" class="nav-link"><i class="undefined"></i>
  interfaceEx
</a></li></ul></li><li class="dropdown-item"><h4>AI</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/AlgorithmAI/" class="nav-link"><i class="undefined"></i>
  AI
</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title"><i class="undefined"></i>
      csBase
    </span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/CSBase/" class="nav-link"><i class="undefined"></i>
  CSBase
</a></li></ul></div></div> <!----></nav> <ul class="sidebar-links"><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span>ES</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/JS/es/aJSType.html" class="sidebar-link">1. 浅谈 JS 类型</a></li><li><a href="/JS/es/aOperations.html" class="sidebar-link">1. JS 运算符</a></li><li><a href="/JS/es/aScope.html" class="sidebar-link">1. 作用域和闭包</a></li><li><a href="/JS/es/bContext.html" class="sidebar-link">2. 执行上下文和调用栈</a></li><li><a href="/JS/es/bThis.html" class="sidebar-link">2.  浅谈 this</a></li><li><a href="/JS/es/cObject.html" class="sidebar-link">3. 浅谈 JS 对象</a></li><li><a href="/JS/es/cClassExtend.html" class="sidebar-link">3. 类的继承</a></li><li><a href="/JS/es/cString.html" class="sidebar-link">4. 字符串大总结</a></li><li><a href="/JS/es/cArray.html" class="sidebar-link">4. 数组总结一波</a></li><li><a href="/JS/es/dRegExp.html" class="sidebar-link">4. 浅谈正则</a></li><li><a href="/JS/es/dDate.html" class="sidebar-link">4. 日期常用</a></li><li><a href="/JS/es/dMath.html" class="sidebar-link">4. Math</a></li><li><a href="/JS/es/es6Struct.html" class="sidebar-link">5. ES6 Symbol, Set, Map</a></li><li><a href="/JS/es/gModules.html" class="sidebar-link">6.modules</a></li><li><a href="/JS/es/gFunction.html" class="sidebar-link">6. Function</a></li><li><a href="/JS/es/icall&amp;apply&amp;bind.html" class="sidebar-link">9. icall&amp;apply&amp;bind</a></li><li><a href="/JS/es/iprototype.html" class="sidebar-link">9. prototypeAND_proto_</a></li><li><a href="/JS/es/instanceof&amp;typeof.html" class="sidebar-link">instanceof&amp;typeof</a></li><li><a href="/JS/es/iNewByme.html" class="sidebar-link">new operation</a></li><li><a href="/JS/es/xClone.html" class="sidebar-link">Clone</a></li><li><a href="/JS/es/xPromiseA+.html" class="sidebar-link">10. Promise/A+&amp;Ach</a></li><li><a href="/JS/es/xasyncAwait.html" class="sidebar-link">10. 从 Promise 到 await</a></li></ul></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>DOM</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>BOM</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>package</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>V8</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>selfFunc</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>BrowserEnv</span> <span class="arrow right"></span></p> <!----></section></li></ul> </aside> <div class="password-shadow password-wrapper-in" style="display:none;" data-v-4e82dffc data-v-1156296a><h3 class="title" data-v-4e82dffc data-v-4e82dffc></h3> <!----> <label id="box" class="inputBox" data-v-4e82dffc data-v-4e82dffc><input type="password" value="" data-v-4e82dffc> <span data-v-4e82dffc>Konck! Knock!</span> <button data-v-4e82dffc>OK</button></label> <div class="footer" data-v-4e82dffc data-v-4e82dffc><span data-v-4e82dffc><i class="iconfont reco-theme" data-v-4e82dffc></i> <a target="blank" href="https://vuepress-theme-reco.recoluan.com" data-v-4e82dffc>vuePress-theme-reco</a></span> <span data-v-4e82dffc><i class="iconfont reco-copyright" data-v-4e82dffc></i> <a data-v-4e82dffc><span data-v-4e82dffc>huangsq</span>
            
          <!---->
          2021
        </a></span></div></div> <div data-v-1156296a><main class="page"><section><div class="page-title"><h1 class="title">深刻理解 JavaScript 基于原型的面向对象 Full</h1> <div data-v-1ff7123e><i class="iconfont reco-account" data-v-1ff7123e><span data-v-1ff7123e>huangsq</span></i> <!----> <!----> <!----></div></div> <div class="theme-reco-content content__default"><h1 id="深刻理解-javascript-基于原型的面向对象-full"><a href="#深刻理解-javascript-基于原型的面向对象-full" class="header-anchor">#</a> 深刻理解 JavaScript 基于原型的面向对象 Full</h1> <h2 id="主题一、原型"><a href="#主题一、原型" class="header-anchor">#</a> 主题一、原型</h2> <h3 id="一、基于原型的语言的特点"><a href="#一、基于原型的语言的特点" class="header-anchor">#</a> 一、基于原型的语言的特点</h3> <p>1 只有对象,没有类;对象继承对象,而不是类继承类。</p> <p>2 “原型对象”是基于原型语言的核心概念。原型对象是新对象的模板，它将自身的属性共享给新对象。一个对象不但可以享有自己创建时和运行时定义的属性，而且可以享有原型对象的属性。</p> <p>3 除了语言原生的顶级对象，每一个对象都有自己的原型对象，所有对象构成一个树状的层级系统。root 节点的顶层对象是一个语言原生的对象，其他所有对象都直接或间接继承它的属性。</p> <p>显然，基于原型的语言比基于类的语言简单得多，<strong>我们只需要知道&quot;用对象去创建对象&quot;，就可以在原型的世界里大行其道了！</strong></p> <h3 id="二、基于原型的语言中对象的创建"><a href="#二、基于原型的语言中对象的创建" class="header-anchor">#</a> 二、基于原型的语言中对象的创建</h3> <p>创建有两个步骤</p> <ol><li><blockquote><p>使用&quot;原型对象&quot;作为&quot;模板&quot;生成新对象</p></blockquote></li></ol> <p>这个步骤是必要的，这是每个对象出生的唯一方式。以原型为模板创建对象，这也是&quot;原型&quot;(prototype)的原意。</p> <ol start="2"><li><blockquote><p>初始化内部属性</p></blockquote></li></ol> <p>这一步骤不是必要的。通俗点说，就是，对&quot;复制品&quot;不满意，我们可以&quot;再加工&quot;，使之获得不同于&quot;模板&quot;的&quot;个性&quot;。</p> <p>这两个步骤很自然，也很好理解，比使用类构造对象从概念上简单得多了。对于习惯了 java 基于类的面向对象的语言的程序员, 这种&quot;新颖&quot;的生成对象的方式一定会让他们感到好奇</p> <h3 id="三、原型-为复用代码而生"><a href="#三、原型-为复用代码而生" class="header-anchor">#</a> 三、原型，为复用代码而生</h3> <p>使用原型，能复用代码，节省内存空间</p> <p>举个例子，存在旧对象 oldObject，它有一个属性 name，值是’Andy’, 和一个名为 getName()的方法，如果以该对象为原型创建一个新对象，</p> <div class="language- extra-class"><pre class="language-text"><code>newObject = create(oldObject);
</code></pre></div><p>那么新对象 newObject 同样具有属性 name，值也是’Andy’，也有一个方法 getName()。值得注意的是，<strong>newObject 并不是在内存中克隆了 oldObject，它只是引用了 oldObject 的属性,</strong> 导致实际的效果好像&quot;复制&quot;了 newObject 一样。</p> <p>newObject = create(oldObject);创建的对象 newObject 只有一个属性，这个属性的值是原型对象的地址(或者引用)，如下图所示。</p> <p><img src="/images/JS/es/self-function/jsObjectBaseOnPrototype.assets/__proto__.png" alt="img"> <img src="/assets/img/__proto__.1e977897.png" alt="img"></p> <p>当对象访问属性的时候，如果在内部找不到，那么会在原型对象中查找到属性；如果原型对象中仍然找不到属性，原型对象会查找自身的原型对象，如此循环下去，直至找到属性或者到达顶级对象。对象查找属性的过程所经过的对象构成一条链条，称之为原型链。<strong>newObject,oldObject 和 topObject 就构成一条原型链。</strong></p> <p>下面列出 newObject 的 3 种的查找属性情况</p> <blockquote><p>newObject 查找 name，</p></blockquote> <p>1 内部找不到，到原型对象中查找</p> <p>2 oldObject 中查找到了 name，成功返回；</p> <blockquote><p>newObject 查找 toString</p></blockquote> <p>1 内部找不到,到原型对象中查找</p> <p>2 oldObject 中查找不到 toString,到原型对象中查找</p> <p>3 topObject 中查找到了 toString，成功返回；</p> <blockquote><p>newObject 查找 valueOf</p></blockquote> <p>1 内部找不到,到原型对象中查找</p> <p>2 oldObject 中查找不到 valueOf,到原型对象中查找</p> <p>3 topObject 中还是找不到，而且 topObject 是顶层对象，所以返回错误或者空值。</p> <p>**对象会通过原型链动态地查找属性，对象的所拥有的属性并不是静态的。**如果原型链上的一个对象发生的改变，那么这个改变也会马上会反应到在原型链中处于该对象下方的所有对象。</p> <h3 id="四、继承"><a href="#四、继承" class="header-anchor">#</a> 四、继承</h3> <p>如果以 oldObject 为原型创建了 newObject，那么可以说 newObject 继承了 oldObject。</p> <p>在 java 中 通过语句 class Cat extends Animal 定义 Cat 类继承 Animal 类，Cat 类产生的实例对象便拥有了 Animal 类中定义的属性。类似地，在基于原型的语言中， 通过 cat = create(animal)创建以 animal 对象为模板的 cat 对象，cat 对象便拥有了 animal 对象中的属性，因此可以说 cat 对象继承了 anmial 对象。</p> <h3 id="小结"><a href="#小结" class="header-anchor">#</a> 小结</h3> <p>原型的本质就是对象引用原型对象的属性，实现代码复用。</p> <p>基于原型的语言是以原型对象为模板创建对象 newObject = create(oldObject)。</p> <h2 id="主题二、深刻理解-javascript-基于原型的面向对象"><a href="#主题二、深刻理解-javascript-基于原型的面向对象" class="header-anchor">#</a> 主题二、深刻理解 JavaScript 基于原型的面向对象</h2> <h3 id="一、饱受争议的-javascript"><a href="#一、饱受争议的-javascript" class="header-anchor">#</a> 一、饱受争议的 javascript</h3> <p>javascript 本质上是基于原型的语言，但是却引入了基于类的语言的 new 关键字和 constructor 模式，导致 javascript 饱受争议。</p> <p>javascript 的作者 Brendan Eich 1994 年研发这门语言的时候，C++语言是最流行的语言，java1.0 即将发布，面向对象编程势不可挡，于是他认为，引入 new 关键字可以使习惯 C++/java 程序员更容易接受和使用 javascript。</p> <blockquote><p>实际上，事实证明引入 new 是个错误的决定。</p></blockquote> <p>C++/java 程序员看到 new 一个 function 的时候，他们会认为 js 通过 function 创建对象，function 相当于类，接着他们会尝试在 js 挖掘类似 java/C++面向类的编程特性，结果他们发现 function 没有 extends，反而有个很奇怪的 prototype 对象，于是他们开始咒骂，js 的面向对象太糟糕了。确实，new 的引入让他们以为 js 的面向对象与 java/C++类似，实际上并不是，如果不是以原型本质去理解 js 的面向对象，注定要遭受挫折，new，prototype，<strong>proto</strong>才是 javascript 实现原型的具体手段。</p> <p>另一方面，理解原型的程序员，也表示不高兴，因为居然要使用 new function 的语法来间接实现原型继承，三行代码才做到最基本的原型继承,下面是实现对象 newObject 继承对象 oldObject 的代码，</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token constant">F</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
<span class="token class-name">F</span><span class="token punctuation">.</span>prototype <span class="token operator">=</span> oldObject<span class="token punctuation">;</span>
<span class="token keyword">var</span> newObject <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">F</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>这太繁琐了。基于原型语言理论上应该存在一个函数 create(prototypeObject)，功能是基于原型对象产生新对象，例如，</p> <p>var newObject = create(oldObject);</p> <p>看到这样的代码，人们就会自然很清晰地联想到，newObject 是以 oldObject 模板构造出来的。</p> <h3 id="js-是世界上最容易被误解的语言"><a href="#js-是世界上最容易被误解的语言" class="header-anchor">#</a> js 是世界上最容易被误解的语言</h3> <p>原因主要有两个:</p> <ol><li>作为基于原型的语言中，却连最基本的一个通过原型产生对象的函数 create(prototypeObject)也没有，让人不知道 js 根本上是以对象创建对象。应该添加该函数，现在 Chrome 和 IE9 的 Object 对象就有这个 create 函数。</li></ol> <ol start="2"><li>使用 new func 形式创建对象，让人误会 js 是以类似 java 类的构造函数创建对象，实际上，构造函数根本上在创建对象上起到次要的作用，甚至不需要，重要的只有函数的属性 prototype 引用的原型对象，新对象以此为模板生成，生成之后才调用函数做初始化的操作，而初始化操作不是必要的。当初应该废弃 new 操作符，把 new func 分解为两步操作，</li></ol> <p>var newObject = create(func.prototype);</p> <p>func.call(newObject);</p> <p>这样程序员才好理解。如果想把这两个步骤合二为一，应该使用 new 以外的关键字。</p> <p>到这里，我们务必要牢牢印入脑海的是，<strong>js 的面向对象是基于原型的面向对象，对象创建的方式根本上只有一种，就是以原型对象为模板创建对象</strong>，newObject = create(oldObject)。new function 不是通过函数创建对象，只是刻意模仿 java 的表象。</p> <p>js 在面向对象上遭遇的争议，完全是因为商业因素导致作者失去了自己的立场。就像现在什么产品都加个云一样，如果那时候不加个 new 关键字来标榜自己面向对象，产生&quot;js 其实类似 c++/java&quot;的烟幕，可能根本没有人去关注 javascript。更令人啼笑皆非的是，原本称作 LiveScript 的 javascript，因为 后期和 SUN 合作，并且为了沾上当时被 SUN 炒得火热的 Java 的光，发布的时候居然改名成 Javascript。</p> <h3 id="二、从原型本质-站在语言设计者角度-理解-constructor-模式"><a href="#二、从原型本质-站在语言设计者角度-理解-constructor-模式" class="header-anchor">#</a> 二、从原型本质，站在语言设计者角度，理解 constructor 模式</h3> <p>假想我们是当时设计 javascript 继承机制的 Brendan Eich，我们会怎么设计 js 的面向对象呢？</p> <p>现在 javascript 开发到这样的阶段</p> <ol><li><p>拥有基本类型，分支和循环，基本的数学运算,</p></li> <li><p>所有数据都是对象</p></li> <li><p>拥有类似 C 语言的 function</p></li> <li><p>可以用 var obj = {}语句生成一个空对象，然后使用 obj.xxx 或 obj[xxx]设置对象属性</p></li> <li><p>没有继承，没有 this 关键字，没有 new</p></li></ol> <p>我们任务是，实现 javascript 的面向对象，最好能达到类似 java 的创建对象和继承效果。更具体一点，我们要扩充 js 语言，实现类似下面的 java 代码。</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">class</span> <span class="token class-name">Empolyee</span><span class="token punctuation">{</span>
    String name<span class="token punctuation">;</span>
    <span class="token keyword">public</span> <span class="token function">Employee</span><span class="token punctuation">(</span><span class="token parameter">String name</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> name<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">public</span> <span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>name<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token keyword">class</span> <span class="token class-name">Coder</span> <span class="token keyword">extends</span> <span class="token class-name">Employee</span> <span class="token punctuation">{</span>
    String language<span class="token punctuation">;</span>
    <span class="token keyword">public</span> <span class="token function">Coder</span><span class="token punctuation">(</span><span class="token parameter">name<span class="token punctuation">,</span>language</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token keyword">super</span><span class="token punctuation">(</span>name<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>language <span class="token operator">=</span> language<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">public</span> <span class="token function">getLanguage</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>language<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="_1-实现创建对象"><a href="#_1-实现创建对象" class="header-anchor">#</a> 1 实现创建对象</h3> <p>现有的对象都是基本类型，怎么创建用户自定义的对象呢？</p> <p>(解释：var i = 1;</p> <p>这里的 i 是解释器帮忙封装的 Number 对象，虽然看起来跟 C 的 int 没区别，但实际上可以 i.toString()。</p> <p>)</p> <p>java 使用构造函数来产生对象，我们尝试把 java 的 Empolyee 的构造函数代码拷贝下来，看看可不可以模仿</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">Empolyee</span><span class="token punctuation">(</span><span class="token parameter">name</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> name<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p>我们只要生成一个空对象 obj，再把函数里面的 this 换成 obj，执行函数，就可以生成自定义对象啦！我们把 Employee 这样用来创建对象的函数称作构造函数。</p> <ol><li>首先我们用原生的方式为 function 添加方法 call 和 apply，实现把把函数里面的 this 替换成 obj。</li></ol> <p>call,apply 在 Lisp 语言中已经有实现，很好参考和实现。</p> <ol start="2"><li>然后实现生成实例</li></ol> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">Empolyee</span><span class="token punctuation">(</span><span class="token parameter">name</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> name<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">var</span> employee <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token function">Employee</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span>employee<span class="token punctuation">,</span> <span class="token string">&quot;Jack&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><ol start="3"><li>到这里，以类似 java 方式产生对象基本完成了，但是这个 employee 对象没有方法</li></ol> <p>我们的 function 是第一类对象，可以运行时创建，可以当做变量赋值，所以没有问题</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">Empolyee</span><span class="token punctuation">(</span><span class="token parameter">name</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> name<span class="token punctuation">;</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function-variable function">getName</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>name<span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="_2-实现继承"><a href="#_2-实现继承" class="header-anchor">#</a> 2 实现继承</h3> <p>创建对象成功了，接着考虑实现继承。现在我们所有数据都是对象，没有类，有两种方案摆在我们的面前</p> <p>a.类继承</p> <p>b.原型继承</p> <h3 id="_2-a-实现类继承"><a href="#_2-a-实现类继承" class="header-anchor">#</a> 2.a 实现类继承</h3> <p>a 方案是首选方案，因为跟 java 相似的话，JS 更容易被接受</p> <p>先粘贴 Java 构造函数的代码</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">function</span> Coder <span class="token keyword">extends</span> <span class="token class-name">Employee</span><span class="token punctuation">(</span>name<span class="token punctuation">,</span>language<span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">super</span><span class="token punctuation">(</span>name<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>language <span class="token operator">=</span> language<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><ol><li><p>把 extends 后面的函数自动记录下来,放到 function 对象的 parentFunc 变量</p></li> <li><p>如果第一行是 super()，替换成 var parent = newInstance(Coder.parentFunc,XXX),这样内部保留一个名为 parent 父对象;</p></li> <li><p>把 this 替换为 obj,super 替换换成 parent</p></li> <li><p>&quot;.&quot;和&quot;[]&quot;重新定义，需要支持在对象内部 parent 对象查找属性。</p></li></ol> <p>这四步都属于比较大的改动，只要认真想一想都觉得不是太容易。</p> <p>更重要的是，即使把这 4 步实现了，不但语言变得太复杂了，而且产生的对象根本享受不了继承带来的好处——内存中的代码复用，因为这样产生的每个对象都有&quot;父类(函数)&quot;的代码而不是仅有一份。这时候该注意到 java 中使用类的意义了，java 类的代码在内存只有一份，然后每个对象执行方法都是引用类的代码，所有子类对象调用父类方法的时候，执行的代码都是同一份父类的方法代码。但是 JS 没有类，属性和方法都是存在对象之中，根本没有办法做到 java 那样通过类把代码共享给所有对象！</p> <p>a 方案宣告失败</p> <h3 id="_2-b-实现原型继承"><a href="#_2-b-实现原型继承" class="header-anchor">#</a> 2.b 实现原型继承</h3> <p>看 b 方案。我们现在的 js 语言，一切都是对象，显然非常适合使用基于原型的继承方式，就看具体如何实现了。</p> <p>我们新建一个 topObject 来代表顶层对象,那么创建 employee 对象的时候，应该在 employee 对象内部设置一个属性引用 topObject;</p> <p>同理,创建 coder 对象的时候,应该在 coder 对象内部设置一个属性引用 employee 对象,我们把这个引用原型对象的属性命名约定为&quot;<strong>proto</strong>&quot;。更进一步，为了构建一个对象的过程更自然，构建时候应该先在新对象中设置引用原型对象的属性，以表示先用模板制作出一个和模板一致的对象，然后再才执行构造函数初始化这个新对象自身的属性，以添加个性化的东西。具体实现代码如下：</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">var</span> topObject <span class="token operator">=</span> <span class="token punctuation">{</span>
    __version__ <span class="token operator">:</span> <span class="token number">1.0</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">function</span> <span class="token function">Empolyee</span><span class="token punctuation">(</span><span class="token parameter">name</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> name<span class="token punctuation">;</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function-variable function">getName</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>name<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">var</span> employee <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
employee<span class="token punctuation">.</span>__proto__ <span class="token operator">=</span> topObject<span class="token punctuation">;</span>
<span class="token function">Employee</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span>employee<span class="token punctuation">,</span><span class="token string">'Jack'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">function</span> <span class="token function">Coder</span><span class="token punctuation">(</span><span class="token parameter">name<span class="token punctuation">,</span>language</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> name<span class="token punctuation">;</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span>language <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>language<span class="token punctuation">;</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function-variable function">getLanguage</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>language<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">var</span> coder <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
coder<span class="token punctuation">.</span>__proto__ <span class="token operator">=</span> employee<span class="token punctuation">;</span>
<span class="token function">Coder</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span>coder<span class="token punctuation">,</span><span class="token string">'Coder Jack'</span><span class="token punctuation">,</span><span class="token string">'Java'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>当然我们还要做的工作就是在 javascript 解释器中增加对<strong>proto</strong>的支持，当一个对象访问一个自身没有的属性的时候，就通过<strong>proto</strong>属性查找原型链上是否存在该属性。</p> <h3 id="优化-1-函数封装"><a href="#优化-1-函数封装" class="header-anchor">#</a> 优化 1. 函数封装</h3> <p>这一切看起来并不是那么美好，我们创建一个 employee 对象需要 3 行代码，我们需要这么一个函数封装这 3 行代码</p> <p>function newInstance(prototype,constructor,arg1,arg2,....);</p> <p>第一个参数是原型对象，第二个是构造函数，后面的是构造函数的参数</p> <p>可以这么实现</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">sliceArguments</span><span class="token punctuation">(</span><span class="token parameter">argumentsObj<span class="token punctuation">,</span> n</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">var</span> args <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
  <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">var</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> argumentsObj<span class="token punctuation">.</span>length<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>i <span class="token operator">&gt;=</span> n<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      args<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>argumentsObj<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token keyword">function</span> <span class="token function">newInstance</span><span class="token punctuation">(</span><span class="token parameter">prototype<span class="token punctuation">,</span> constructor</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">var</span> obj <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
  obj<span class="token punctuation">.</span>__proto__ <span class="token operator">=</span> prototype<span class="token punctuation">;</span>
  <span class="token function">constructor</span><span class="token punctuation">.</span><span class="token function">apply</span><span class="token punctuation">(</span>obj<span class="token punctuation">,</span> <span class="token function">sliceArguments</span><span class="token punctuation">(</span>arguments<span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">var</span> employee <span class="token operator">=</span> <span class="token function">newInstance</span><span class="token punctuation">(</span>topObject<span class="token punctuation">,</span> Employee<span class="token punctuation">,</span> <span class="token string">&quot;Jack&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> coder <span class="token operator">=</span> <span class="token function">newInstance</span><span class="token punctuation">(</span>employee<span class="token punctuation">,</span> Coder<span class="token punctuation">,</span> <span class="token string">&quot;Coder Jack&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;Java&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="优化-2-缩减参数"><a href="#优化-2-缩减参数" class="header-anchor">#</a> 优化 2. 缩减参数</h3> <p>仔细一看，function newInstance 的参数可以更少,我们可以把原型对象 prototype 作为属性放在 constructor，那样我们的函数就可以只有一个参数了。属性名就约定为 prototype 吧。</p> <p>2.1 我们修改解释器，把 topObject 写入语言作为原生的顶级对象；再修改 function 的源代码，让每一个新建的 function 都默认具有属性 prototype = topObject</p> <p>2.2 优化后的代码如下</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// 看下new的js本质</span>
<span class="token keyword">function</span> <span class="token function">newInstance</span><span class="token punctuation">(</span><span class="token parameter">constructor</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">var</span> obj <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
  obj<span class="token punctuation">.</span>__proto__ <span class="token operator">=</span> constructor<span class="token punctuation">.</span>prototype<span class="token punctuation">;</span>
  <span class="token keyword">const</span> <span class="token function-variable function">sliceArguments</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">arguParam<span class="token punctuation">,</span> index</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> outArr <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> index<span class="token punctuation">,</span> Len <span class="token operator">=</span> arguParam<span class="token punctuation">.</span>length<span class="token punctuation">;</span> i <span class="token operator">&lt;</span> Len<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      outArr<span class="token punctuation">[</span>i <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">=</span> arguParam<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">return</span> outArr<span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>
  <span class="token function">constructor</span><span class="token punctuation">.</span><span class="token function">apply</span><span class="token punctuation">(</span>obj<span class="token punctuation">,</span> <span class="token function">sliceArguments</span><span class="token punctuation">(</span>arguments<span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">return</span> obj<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">function</span> <span class="token function">Employee</span><span class="token punctuation">(</span><span class="token parameter">name</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> name<span class="token punctuation">;</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function-variable function">getName</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>name<span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">var</span> employee <span class="token operator">=</span> <span class="token function">newInstance</span><span class="token punctuation">(</span>Employee<span class="token punctuation">,</span> <span class="token string">&quot;Jack&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> employee2 <span class="token operator">=</span> <span class="token function">newInstance</span><span class="token punctuation">(</span>Employee<span class="token punctuation">,</span> <span class="token string">&quot;Jack2&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> employee3 <span class="token operator">=</span> <span class="token function">newInstance</span><span class="token punctuation">(</span>Employee<span class="token punctuation">,</span> <span class="token string">&quot;Jack3&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">function</span> <span class="token function">Coder</span><span class="token punctuation">(</span><span class="token parameter">name<span class="token punctuation">,</span> language</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> name<span class="token punctuation">;</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span>language <span class="token operator">=</span> language<span class="token punctuation">;</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function-variable function">getLanguage</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>language<span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token class-name">Coder</span><span class="token punctuation">.</span>prototype <span class="token operator">=</span> <span class="token function">newInstance</span><span class="token punctuation">(</span>Employee<span class="token punctuation">,</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">var</span> coder <span class="token operator">=</span> <span class="token function">newInstance</span><span class="token punctuation">(</span>Coder<span class="token punctuation">,</span> <span class="token string">&quot;Coder Jack&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;Java&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> coder2 <span class="token operator">=</span> <span class="token function">newInstance</span><span class="token punctuation">(</span>Coder<span class="token punctuation">,</span> <span class="token string">&quot;Coder Lee&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;C#&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> coder3 <span class="token operator">=</span> <span class="token function">newInstance</span><span class="token punctuation">(</span>Coder<span class="token punctuation">,</span> <span class="token string">&quot;Coder Liu&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;C++&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> coder4 <span class="token operator">=</span> <span class="token function">newInstance</span><span class="token punctuation">(</span>Coder<span class="token punctuation">,</span> <span class="token string">&quot;Coder Liu&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;JavaScript&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>coder<span class="token punctuation">,</span> coder<span class="token punctuation">,</span> coder<span class="token punctuation">,</span> coder<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>到达这一步，可以发现,我们的最终实现和 Breandan Eich 非常类似，在期待尽量模仿 java 创建对象的前提下，Brendan Eich 当时的设计是合乎情理的，是良好的。他相对于我们方案的唯一不同就是他使用了 new 关键字，而我们使用了 newInstance 函数。</p> <p>尽管 new 关键字容易让人误解，但是背后优美的原型思想，决定了时至今日，javascript 依然是浏览器编程语言的龙头大哥，甚至发展到 node.js 服务端编程。</p> <h3 id="三、从-javascript-的原型本质-理解-javascript-的构造器模式"><a href="#三、从-javascript-的原型本质-理解-javascript-的构造器模式" class="header-anchor">#</a> 三、从 javascript 的原型本质，理解 javascript 的构造器模式</h3> <p>在&quot;从原型本质，站在语言设计者角度，理解 constructor 模式&quot;一节中我们站在设计者角度粗略重现了 js 的设计过程。现在我们换个角色，不是语言设计者，而是熟悉原型概念并且知道 js 是基于原型的语言的程序员，去理解 js 的使用(new 关键字+函数)的创建对象方式。</p> <ol><li><h3 id="理解-new-func"><a href="#理解-new-func" class="header-anchor">#</a> 理解 new func()</h3></li></ol> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">Employee</span><span class="token punctuation">(</span><span class="token parameter">name</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> name<span class="token punctuation">;</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function-variable function">getName</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>name<span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">var</span> employee <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Employee</span><span class="token punctuation">(</span><span class="token string">&quot;Jack&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>分析上面代码。</p> <p>javascript 引入 new 关键字是为了模仿 java 创建对象的方式，通过语句 var employee = new Employee('Jack') 就生成了一个 employee 对象。</p> <p>我们知道，基于原型的语言生成一个步骤有两步，第一步是使用&quot;原型对象&quot;作为&quot;模板&quot;生成新对象，第二步是初始化新对象的内部属性。</p> <blockquote><p>我们敢肯定地推断，javascript 中的 new Employee('Jack');必然做了这两件事情，那么</p></blockquote> <p>1 &quot;原型对象&quot;在哪里?</p> <p>2 怎么做到&quot;初始化新对象的内部属性&quot;?</p> <p>答案是，Employee.prototype 就是我们要找的&quot;原型对象&quot;，通过&quot;以新对象代替 this,执行 Employee 函数&quot;做到了&quot;初始化新对象的内部属性&quot;。</p> <p>使用 new+function 的方式创建对象，其实就是应用我们设计的函数 newInstance 时的思想</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">newInstance</span><span class="token punctuation">(</span><span class="token parameter">constructor</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">let</span> obj <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
  obj<span class="token punctuation">.</span>__proto__ <span class="token operator">=</span> constructor<span class="token punctuation">.</span>prototype<span class="token punctuation">;</span>
  <span class="token function">constructor</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span>obj<span class="token punctuation">,</span> <span class="token function">sliceArguments</span><span class="token punctuation">(</span>arguments<span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">return</span> obj<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p>javascript 把生成一个对象所需的两个元素——&quot;原型对象&quot;和&quot;初始化&quot;都集中在构造函数，以简化创建对象的过程，其实是个良好的设计。唯一的缺点是 new 关键字容易让人误会。</p> <h3 id="_2-简单罗列-javascript-构造器模式的特点"><a href="#_2-简单罗列-javascript-构造器模式的特点" class="header-anchor">#</a> 2. 简单罗列 javascript 构造器模式的特点</h3> <p><strong>1) javascript 的顶层对象是 Object.prototype</strong></p> <p><strong>2) 所有对象有一个</strong>proto<strong>属性。****proto</strong>指向自己的&quot;原型对象&quot;，搜索属性的原型链以<strong>proto</strong>为基础。</p> <p>**3) 每个函数都会默认关联一个原型对象。**javascript 每创建一个函数的时候，都同时创建一个原型对象，赋值到函数的 prototype 属性，用作使用 new 生成实例对象的默认原型对象。该默认原型对象的内容是</p> <div class="language-json extra-class"><pre class="language-json"><code><span class="token punctuation">{</span>
    __proto__<span class="token operator">:</span>Object.prototype<span class="token punctuation">,</span>
    constructor<span class="token operator">:</span> 指向函数本身
<span class="token punctuation">}</span>
</code></pre></div><p><strong>proto</strong>指向 Object.prototype 的目的是为了使生成的实例对象继承顶层对象 Object.prototype;</p> <p>而 constructor 指向函数本身的目的是为了使生成的实例对象 newObject 可以直接通过 newObject.constructor 访问到构造函数，同时构造函数和原型对象可以互相访问也是个良好的设计。但是，实际上，constructor 并没有什么用，所以大家可以不理会这个属性，这仅仅是一个优化的设计。</p> <p>构造函数，原型对象，实例对象的<strong>三角关系图</strong>如下</p> <p><img src="/images/JS/es/self-function/jsObjectBaseOnPrototype.assets/protoType__proto__.png" alt="img"> <img src="/assets/img/protoType__proto__.f8c218fb.png" alt="img"></p> <h3 id="_3-可以修改或替换构造函数都会默认关联的原型对象。"><a href="#_3-可以修改或替换构造函数都会默认关联的原型对象。" class="header-anchor">#</a> 3.可以修改或替换构造函数都会默认关联的原型对象。</h3> <p>需要注意的的是，不少资料说，如果是使用自定义的对象替换了构造函数 f 默认关联的原型对象，最好添加一行代码</p> <div class="language-js extra-class"><pre class="language-js"><code>f<span class="token punctuation">.</span>prototype<span class="token punctuation">.</span>constructor <span class="token operator">=</span> f<span class="token punctuation">;</span>
</code></pre></div><p>以确保维护正确的三角关系。</p> <p>例如</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">Employee</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
<span class="token keyword">function</span> <span class="token function">Coder</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
<span class="token class-name">Coder</span><span class="token punctuation">.</span>prototype <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Employee</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token class-name">Coder</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span>constructor <span class="token operator">=</span> Coder<span class="token punctuation">;</span>
<span class="token keyword">let</span> coder <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Coder</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>但是经过我的测试，即使不写上一行 Coder.prototype.constructor = Coder;，以下测试都表现正确</p> <div class="language-js extra-class"><pre class="language-js"><code>coder instanceOf Coder<span class="token comment">//true</span>
<span class="token class-name">Coder</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function">isPrototypeOf</span><span class="token punctuation">(</span>coder<span class="token punctuation">)</span><span class="token comment">//true</span>
</code></pre></div><p>得到以下结果</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">Employee</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
<span class="token keyword">function</span> <span class="token function">Coder</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
<span class="token class-name">Coder</span><span class="token punctuation">.</span>prototype <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Employee</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// Coder.prototype.constructor = Coder;</span>
<span class="token keyword">let</span> coder <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Coder</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>coder<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//Employee {}</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>coder <span class="token keyword">instanceof</span> <span class="token class-name">Coder</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//true</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token class-name">Coder</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function">isPrototypeOf</span><span class="token punctuation">(</span>coder<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//true</span>

<span class="token comment">//==============</span>
<span class="token keyword">function</span> <span class="token function">Employee</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
<span class="token keyword">function</span> <span class="token function">Coder</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
<span class="token class-name">Coder</span><span class="token punctuation">.</span>prototype <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Employee</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token class-name">Coder</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span>constructor <span class="token operator">=</span> Coder<span class="token punctuation">;</span>
<span class="token keyword">let</span> coder <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Coder</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>coder<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//Employee {}</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>coder <span class="token keyword">instanceof</span> <span class="token class-name">Coder</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//true</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token class-name">Coder</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function">isPrototypeOf</span><span class="token punctuation">(</span>coder<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//true</span>
</code></pre></div><p>也就是说<strong>原型对象的 construtctor 属性根本不影响继承，它只是普通的一个附加属性，没有任何特殊作用，我们可以完全无视这个属性。</strong></p> <p>不写上一行 Coder.prototype.constructor = Coder;，唯一会引起的错误只有，coder.constructor 的结果是 Employee,而不是 Coder。实</p> <p>际上我们并不会关心 coder.constructor，我们关心的只是是继承，所以即使不写上一行 Coder.prototype.constructor = Coder;也没有关系。</p> <ol start="5"><li><p>以下代码几乎涵盖了上面所讨论的特点，建议读者在 chrome 中运行该代码以加深对构造器模式的理解</p> <p>5.a.代码</p></li></ol> <div class="language-html extra-class"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
  <span class="token keyword">function</span> <span class="token function">Employee</span><span class="token punctuation">(</span><span class="token parameter">name</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> name<span class="token punctuation">;</span>
    <span class="token comment">//this.getName = function(){return this.name};方法代码应该放到原型对象之中，</span>
    <span class="token comment">// 而不是初始化函数中，这样每个employee对象都共享同一个方法代码</span>
  <span class="token punctuation">}</span>
  <span class="token class-name">Employee</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">getName</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>name<span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>
  <span class="token keyword">let</span> employee <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Employee</span><span class="token punctuation">(</span><span class="token string">&quot;Jack&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;employee.getName(): &quot;</span> <span class="token operator">+</span> employee<span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//Jack</span>
  <span class="token keyword">let</span> employee2 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Employee</span><span class="token punctuation">(</span><span class="token string">&quot;Jack2&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;employee2.getName(): &quot;</span> <span class="token operator">+</span> employee2<span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//Jack2</span>
  <span class="token keyword">function</span> <span class="token function">Coder</span><span class="token punctuation">(</span><span class="token parameter">name<span class="token punctuation">,</span> language</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> name<span class="token punctuation">;</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>language <span class="token operator">=</span> language<span class="token punctuation">;</span>
    <span class="token comment">//this.getLanguage = function(){return this.language}; 方法代码应该放到原型对象之中，</span>
    <span class="token comment">// 而不是初始化函数中，这样才能实现代码共享</span>
  <span class="token punctuation">}</span>
  <span class="token class-name">Coder</span><span class="token punctuation">.</span>prototype <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Employee</span><span class="token punctuation">(</span><span class="token string">&quot;&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token class-name">Coder</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span>constructor <span class="token operator">=</span> Coder<span class="token punctuation">;</span> <span class="token comment">//这一句话其实也可以不写，不影响继承</span>
  <span class="token class-name">Coder</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">getLanguage</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>language<span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>

  <span class="token keyword">let</span> coder <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Coder</span><span class="token punctuation">(</span><span class="token string">&quot;Coder Jack&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;Java&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;coder.getName(): &quot;</span> <span class="token operator">+</span> coder<span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//Coder Jack</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;coder.getLanguage(): &quot;</span> <span class="token operator">+</span> coder<span class="token punctuation">.</span><span class="token function">getLanguage</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//Java</span>
  <span class="token keyword">let</span> coder2 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Coder</span><span class="token punctuation">(</span><span class="token string">&quot;Coder Lee&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;C#&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;coder2.getName(): &quot;</span> <span class="token operator">+</span> coder2<span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//Coder Lee</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;coder2.getLanguage(): &quot;</span> <span class="token operator">+</span> coder2<span class="token punctuation">.</span><span class="token function">getLanguage</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//C#</span>
  <span class="token keyword">let</span> coder3 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Coder</span><span class="token punctuation">(</span><span class="token string">&quot;Coder Liu&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;C++&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;coder3.getLanguage(): &quot;</span> <span class="token operator">+</span> coder3<span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//Coder Liu</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;coder3.getLanguage()&quot;</span> <span class="token operator">+</span> coder3<span class="token punctuation">.</span><span class="token function">getLanguage</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//C++</span>

  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;employee.constructor: &quot;</span> <span class="token operator">+</span> employee<span class="token punctuation">.</span>constructor<span class="token punctuation">)</span><span class="token punctuation">;</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>
    <span class="token string">&quot;employee.constructor.prototype === Employee.prototype: &quot;</span> <span class="token operator">+</span>
      <span class="token punctuation">(</span>employee<span class="token punctuation">.</span>constructor<span class="token punctuation">.</span>prototype <span class="token operator">===</span> <span class="token class-name">Employee</span><span class="token punctuation">.</span>prototype<span class="token punctuation">)</span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>
    <span class="token string">&quot;employee.constructor.prototype.constructor === Employee: &quot;</span> <span class="token operator">+</span>
      <span class="token punctuation">(</span>employee<span class="token punctuation">.</span>constructor<span class="token punctuation">.</span>prototype<span class="token punctuation">.</span>constructor <span class="token operator">===</span> Employee<span class="token punctuation">)</span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;employee instanceof Object: &quot;</span> <span class="token operator">+</span> <span class="token punctuation">(</span>employee <span class="token keyword">instanceof</span> <span class="token class-name">Object</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>
    <span class="token string">&quot;employee instanceof Function: &quot;</span> <span class="token operator">+</span> <span class="token punctuation">(</span>employee <span class="token keyword">instanceof</span> <span class="token class-name">Function</span><span class="token punctuation">)</span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>
    <span class="token string">&quot;employee instanceof Employee: &quot;</span> <span class="token operator">+</span> <span class="token punctuation">(</span>employee <span class="token keyword">instanceof</span> <span class="token class-name">Employee</span><span class="token punctuation">)</span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>
    <span class="token string">&quot;Employee.prototype.isPrototypeOf(employee): &quot;</span> <span class="token operator">+</span>
      <span class="token class-name">Employee</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function">isPrototypeOf</span><span class="token punctuation">(</span>employee<span class="token punctuation">)</span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>
    <span class="token string">&quot;Function.prototype.isPrototypeOf(employee): &quot;</span> <span class="token operator">+</span>
      <span class="token class-name">Function</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function">isPrototypeOf</span><span class="token punctuation">(</span>employee<span class="token punctuation">)</span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>
    <span class="token string">&quot;Object.prototype.isPrototypeOf(employee): &quot;</span> <span class="token operator">+</span>
      <span class="token class-name">Object</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function">isPrototypeOf</span><span class="token punctuation">(</span>employee<span class="token punctuation">)</span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;coder.constructor: &quot;</span> <span class="token operator">+</span> coder<span class="token punctuation">.</span>constructor<span class="token punctuation">)</span><span class="token punctuation">;</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;coder instanceof Object: &quot;</span> <span class="token operator">+</span> <span class="token punctuation">(</span>coder <span class="token keyword">instanceof</span> <span class="token class-name">Object</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;coder instanceof Function: &quot;</span> <span class="token operator">+</span> <span class="token punctuation">(</span>coder <span class="token keyword">instanceof</span> <span class="token class-name">Function</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;coder instanceof Employee: &quot;</span> <span class="token operator">+</span> <span class="token punctuation">(</span>coder <span class="token keyword">instanceof</span> <span class="token class-name">Employee</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;coder instanceof Coder: &quot;</span> <span class="token operator">+</span> <span class="token punctuation">(</span>coder <span class="token keyword">instanceof</span> <span class="token class-name">Coder</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>
    <span class="token string">&quot;Employee.prototype.isPrototypeOf(coder): &quot;</span> <span class="token operator">+</span>
      <span class="token class-name">Employee</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function">isPrototypeOf</span><span class="token punctuation">(</span>coder<span class="token punctuation">)</span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>
    <span class="token string">&quot;Coder.prototype.isPrototypeOf(coder): &quot;</span> <span class="token operator">+</span>
      <span class="token class-name">Coder</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function">isPrototypeOf</span><span class="token punctuation">(</span>coder<span class="token punctuation">)</span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>
    <span class="token string">&quot;Function.prototype.isPrototypeOf(coder): &quot;</span> <span class="token operator">+</span>
      <span class="token class-name">Function</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function">isPrototypeOf</span><span class="token punctuation">(</span>coder<span class="token punctuation">)</span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>
    <span class="token string">&quot;Object.prototype.isPrototypeOf(coder): &quot;</span> <span class="token operator">+</span>
      <span class="token class-name">Object</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function">isPrototypeOf</span><span class="token punctuation">(</span>coder<span class="token punctuation">)</span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><h3 id="_5-b-对象继承体系结构图"><a href="#_5-b-对象继承体系结构图" class="header-anchor">#</a> 5.b.对象继承体系结构图</h3> <p>下图是上面 5.a 代码的对象整体结构图(图片较大,可以下载到本地缩小来看)</p> <p><strong>从整体上看，这像极了 java 的类继承体系结构，实际上这就是 js 的对象继承体系结构。</strong></p> <p>里面的对象有三种角色，紫色的是构造函数，黄色的是原型对象，绿色的是实例对象，当然不能严格区分这些角色，例如匿名的 Employee 实例对象充当了 Coder 的原型对象。</p> <p>紫色的构造函数和原型对象之间有一个双向箭头，这个双向箭头的意思，构造函数有一个 prototype 属性指向原型对象，而原型队形也有一个 constructor 属性指向构造函数，它们之间有着互相引用的关系。</p> <p>单线箭头，表示的是对象继承关系。</p> <p><img src="/images/JS/es/self-function/jsObjectBaseOnPrototype.assets/extend.png" alt="img"></p> <p><img src="/assets/img/extend.b9eaab90.png" alt="img"></p> <p>从这个图，我们可以直观地看到</p> <ol><li><p>所有对象都有自己的原型对象。所有构造函数的原型对象都是 Function.prototype，Object.prototype 是最顶层的对象。我们可以在 Function.prototype 上增加方法，那么在原型链下方的函数，就可获得这些方法，同理我们可以在 Object.prototype 上增加方法,那么 js 所有对象都拥有了这个方法。</p></li> <li><p>通过原型继承，所有对象构成了一个完整的系统</p></li> <li><p>我相信你能够发现更多有趣的的东西.如果你觉得这篇文章不值得一看，那么请至少看看这张图片，结合这张图片重新思考下 js 原型的理念，应该能给你一些有益的回报。</p></li></ol> <h3 id="_6-构造器模式的-best-practice"><a href="#_6-构造器模式的-best-practice" class="header-anchor">#</a> 6. 构造器模式的 best practice</h3> <ol><li><p>方法最好放在原型对象中，让每个实例对象都共享同一个方法。如果方法放在构造函数中，那么每个对象都有自己独立的一份方法代码，浪费内存。</p></li> <li><p>字段变量(fields,variables)最好放在构造函数中，让每个实例对象都具有一份自己的字段。除非要在所有子类中共享，实现类似静态变量的效果，才把字段放在原型中。</p></li> <li><p>继承层次不宜过深，原型链查找会耗费时间。</p></li></ol> <p>例如，</p> <p>上面第 5)点中的代码片段中，</p> <p>1)Employee 和 Coder 的方法都放在了原型中</p> <p>2)Coder 产生的实例对象虽然继承自匿名 employee 对象(new Employee(''))，拥有 name 属性，但是为了每个 Coder 产生的实例对象都拥有属于自己的一份 name 属性，我们选择在构造函数中重复定义 name 属性，覆盖匿名 employee 对象的 name 属性。</p> <h3 id="四、模拟基于类的面向对象"><a href="#四、模拟基于类的面向对象" class="header-anchor">#</a> 四、模拟基于类的面向对象</h3> <h3 id="_1-该不该模拟类"><a href="#_1-该不该模拟类" class="header-anchor">#</a> 1. 该不该模拟类</h3> <p>javascript 是基于原型的语言，具有强大的表达能力，足可以模拟基于类的面向对象。相信大家也看过不少模拟类的 js 代码，这里不打算罗列。</p> <p>但是，js 毕竟是原型继承的语言，应该要按照原型继承的思维去表达面向对象，而不是用类的思维，这样才能表现出 js 的真正的威力。</p> <p>如果要模拟的话，模拟一些最基本的操作就可以，不要尝试深入模拟基于类的语言的复杂特性，否则会犯下跟 Brendan Eich 同样的错误。模拟的出发点是方便程序员能够更容易地使用 js 面向对象，但是理解了构造器模式和原型链的前提下，没有模拟的必要，只需要封装一些常用的操作就 OK 了。</p> <p>js 的对象没有类型，根本不需要像 java 的对象那样需要关心自己的类继承体系以检查类型转换是否正确，所以模仿类继承没有意义。在 js 中只需要关心对象的内容，关心对象能否继承其他对象的属性就足够了。</p> <p>我就曾经是一个被误导的程序员。看别人写的面向对象教程，以为 js 需要我们开发一些函数，才能使用面向对象。我用过 prototype.js 的 Class.create，那时候我的感觉很不爽，我抱怨 js 为什么连最基本的 class 都没有。</p> <p>如果让我写一篇文章，介绍 js 的面向对象，我会先教会读者领会这个函数，</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">typeof</span> Object<span class="token punctuation">.</span>create <span class="token operator">!==</span> <span class="token string">'function'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    Object<span class="token punctuation">.</span><span class="token function-variable function">create</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">o</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">function</span> <span class="token constant">F</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
        <span class="token class-name">F</span><span class="token punctuation">.</span>prototype <span class="token operator">=</span> o<span class="token punctuation">;</span>
        <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">F</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">var</span> newObject <span class="token operator">=</span> Object<span class="token punctuation">.</span><span class="token function">create</span><span class="token punctuation">(</span>oldObject<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>我要让读者知道，js 是基于原型的语言，它用只能以对象为模板创建对象，它用对象继承对象。它没有类，也不需要类，一切都是对象。在这之后再介绍如何模拟 class 就无所谓了，因为理解了 javascript 的原型本质之后，就会知道模拟类的实质是还是调用原型的特性，也就不会过分期待 js 能够像 java 一样操作类和对象，而且能够发现原型的面向对象能够带来传统面向对象语言无法比拟强大特性。</p> <h3 id="_2-欣赏-crockford-对类的模拟"><a href="#_2-欣赏-crockford-对类的模拟" class="header-anchor">#</a> 2. 欣赏 Crockford 对类的模拟</h3> <p>拜读了 Crockford 的一些文章和他写的 JavaScript:The Good Parts，觉得他写的一些对 js 的简单封装很有意思，也很实用。</p> <p>下面是我对他封装 js 面向对象的理解和总结,希望对读者有用。</p> <p>创建对象的方法根本上只有一种方式：以原型对象为模板创建对象，但是在形式上可以多种多样。</p> <p>在 JS 中，从形式上，除去字面量方式创建对象之外，有三种常单创建对象的形式(or you can call it a &quot;pattern&quot;,anyway)</p> <p><strong>1) 使用构造函数创建对象(constructor pattern)</strong></p> <p>Crockford 通过函数 Function.prototype.method 和 Function.prototype.inherits 方法&quot;美化&quot;了传统构造模式创建对象的代码。</p> <p>值得注意的是，method 方法和 inherits 方法的封装把 prototype 从代码中除去，掩盖了原型本质，需要程序理解构造器模式的前提下才可使用。</p> <div class="language-html extra-class"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
  <span class="token comment">/**
    * 以原型对象为模板创建出新对象
    * 这个函数已经被Chrome和IE9采用，所以需要有个判断这个函数是否已经存在，Crockford的影响力可见一斑
    */</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>Object<span class="token punctuation">.</span>create<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    Object<span class="token punctuation">.</span><span class="token function-variable function">create</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">oldObject</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">function</span> <span class="token constant">F</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token punctuation">}</span> <span class="token punctuation">;</span>
      <span class="token class-name">F</span><span class="token punctuation">.</span>prototype <span class="token operator">=</span> oldObject<span class="token punctuation">;</span>
      <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">F</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
  <span class="token comment">/**
    * 在构造函数的原型对象上添加方法
    * 非常推荐这个函数，因为这个函数能够培养出在原型对象中定义方法的良好习惯
    */</span>
  <span class="token class-name">Function</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">method</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">name<span class="token punctuation">,</span> func</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span><span class="token keyword">this</span><span class="token punctuation">.</span>prototype<span class="token punctuation">[</span>name<span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span>prototype<span class="token punctuation">[</span>name<span class="token punctuation">]</span> <span class="token operator">=</span> func<span class="token punctuation">;</span>
      <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>
  <span class="token comment">/**
    * 使构造函数“继承”其他构造函数
    * 实际上是将构造函数的原型对象替换为另外构造函数产生的对象
    *
    */</span>
  Function<span class="token punctuation">.</span><span class="token function">method</span><span class="token punctuation">(</span><span class="token string">'inherits'</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter"><span class="token constant">F</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>prototype <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">F</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token comment">/*****************************************
    *使用链式代码清晰紧凑地定义构造函数
    *****************************************/</span>
  <span class="token keyword">let</span> <span class="token function-variable function">Employee</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">name</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> name<span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">.</span><span class="token function">method</span><span class="token punctuation">(</span><span class="token string">'getName'</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>name<span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token comment">//由于method和inherits函数都返回this，所以可以非常舒服地将构造函数写成链式代码</span>
  <span class="token keyword">let</span> employee <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Employee</span><span class="token punctuation">(</span><span class="token string">&quot;jack&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token function">alert</span><span class="token punctuation">(</span>employee<span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token comment">//由于method和inherits函数都返回this，所以可以非常舒服地将构造函数写成链式代码</span>
  <span class="token keyword">let</span> <span class="token function-variable function">Coder</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">name<span class="token punctuation">,</span> language</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> name<span class="token punctuation">;</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>language <span class="token operator">=</span> language<span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">.</span><span class="token function">inherits</span><span class="token punctuation">(</span>Employee<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">method</span><span class="token punctuation">(</span><span class="token string">'getLanguage'</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>language<span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">method</span><span class="token punctuation">(</span><span class="token string">'getIntroduction'</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">+</span> <span class="token string">&quot; is skilled in &quot;</span> <span class="token operator">+</span> <span class="token keyword">this</span><span class="token punctuation">.</span>language<span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token keyword">let</span> coder <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Coder</span><span class="token punctuation">(</span><span class="token string">'huangsq'</span><span class="token punctuation">,</span> <span class="token string">'Java'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token function">alert</span><span class="token punctuation">(</span>coder<span class="token punctuation">.</span><span class="token function">getIntroduction</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token function">alert</span><span class="token punctuation">(</span>coder<span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p><strong>增强 1.模拟私有变量。</strong></p> <p>上面构造函数所产生的对象只有 public 成员，没有 private 成员，可以通过闭包实现私有成员</p> <div class="language-html extra-class"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
  <span class="token comment">/*****************************************
   * 模拟私有变量
   ****************************************
   */</span>
  <span class="token keyword">var</span> <span class="token function-variable function">Employee</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">name</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">//私有变量</span>
    <span class="token keyword">var</span> name <span class="token operator">=</span> name<span class="token punctuation">;</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function-variable function">getName</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">return</span> name
    <span class="token punctuation">}</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>
  <span class="token keyword">var</span> employee <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Employee</span><span class="token punctuation">(</span><span class="token string">'huangsq'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token function">alert</span><span class="token punctuation">(</span>employee<span class="token punctuation">.</span>name<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//undefined</span>
  <span class="token function">alert</span><span class="token punctuation">(</span>employee<span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//huangsq</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p>私有成员带来的代价是，访问私有变量的方法不能放置在原型对象中被共享，导致每个生成的对象在内存都独立拥有一份访问私有变量方法的代码。</p> <p><strong>增前 2. 模拟 super.method.</strong></p> <p>构造函数 coder 能不能模仿出 java 中类似 super.method 的效果呢？答案是可以的，最简单的实现是在对象内部创建一个副对象的副本。缺点是增加了内存的消耗。</p> <div class="language-html extra-class"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
  <span class="token comment">/******************
 *模拟super.method()
 ******************/</span>
  <span class="token keyword">var</span> <span class="token function-variable function">Coder</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">name<span class="token punctuation">,</span> language</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">var</span> _super <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Employee</span><span class="token punctuation">(</span><span class="token string">''</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> name<span class="token punctuation">;</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>language <span class="token operator">=</span> language<span class="token punctuation">;</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function-variable function">getName</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">return</span> <span class="token string">&quot;my name is :&quot;</span> <span class="token operator">+</span> _super<span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> name<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">.</span><span class="token function">inherits</span><span class="token punctuation">(</span>Employee<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">method</span><span class="token punctuation">(</span><span class="token string">'getLanguage'</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>language<span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">method</span><span class="token punctuation">(</span><span class="token string">'getIntroduction'</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">+</span> <span class="token string">&quot; is skilled in &quot;</span> <span class="token operator">+</span> <span class="token keyword">this</span><span class="token punctuation">.</span>language<span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token keyword">var</span> coder <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Coder</span><span class="token punctuation">(</span><span class="token string">'Jack'</span><span class="token punctuation">,</span> <span class="token string">'Java'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token function">alert</span><span class="token punctuation">(</span>coder<span class="token punctuation">.</span><span class="token function">getIntroduction</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token function">alert</span><span class="token punctuation">(</span>coder<span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//my name is Jack</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p><strong>2) 使用原型创建对象(prototypal pattern)</strong></p> <p>这种创建方式直白地显示了原型语言创建对象的特点</p> <div class="language-html extra-class"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
  <span class="token comment">/**
   * 以原型对象为模板创建出新对象
   */</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>Object<span class="token punctuation">.</span>create<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    Object<span class="token punctuation">.</span><span class="token function-variable function">create</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">oldObject</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">function</span> <span class="token constant">F</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token punctuation">}</span>
      <span class="token class-name">F</span><span class="token punctuation">.</span>prototype <span class="token operator">=</span> oldObject<span class="token punctuation">;</span>
      <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">F</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>

  <span class="token comment">/*****************************************
   * 使用原型对象创建对象，创建之后再对象初始化，
   * 这种创建方式直白地显示了原型语言创建对象的特点
   *****************************************/</span>
  <span class="token keyword">let</span> employee <span class="token operator">=</span> <span class="token punctuation">{</span>
    name<span class="token operator">:</span> <span class="token string">'Jack'</span><span class="token punctuation">,</span>
    <span class="token function-variable function">getName</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>name<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>

  <span class="token keyword">let</span> coder <span class="token operator">=</span> Object<span class="token punctuation">.</span><span class="token function">create</span><span class="token punctuation">(</span>employee<span class="token punctuation">)</span><span class="token punctuation">;</span>
  coder<span class="token punctuation">.</span>name <span class="token operator">=</span> <span class="token string">'Jackson'</span><span class="token punctuation">;</span>
  coder<span class="token punctuation">.</span>language <span class="token operator">=</span> <span class="token string">'Java'</span><span class="token punctuation">;</span>
  coder<span class="token punctuation">.</span><span class="token function-variable function">getIntroduction</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">+</span> <span class="token string">&quot; is skilled in &quot;</span> <span class="token operator">+</span> <span class="token keyword">this</span><span class="token punctuation">.</span>language<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token function">alert</span><span class="token punctuation">(</span>coder<span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token function">alert</span><span class="token punctuation">(</span>coder<span class="token punctuation">.</span><span class="token function">getIntroduction</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p><strong>3) 使用函数创建对象并返回(functional pattern)</strong></p> <p>这种方式很简单，在函数内部先新建一个对象 var object = ｛｝,然后为这个对象设置属性，最后返回这个对象</p> <blockquote><p>优点：</p></blockquote> <div class="language-js extra-class"><pre class="language-js"><code>a<span class="token punctuation">.</span>最简单最容易理解，甚至不需要理解 js 的原型特性，应该作为最优先考虑的对象创建方式<span class="token punctuation">;</span>
b<span class="token punctuation">.</span>生成对象可以有私有属性
c<span class="token punctuation">.</span>具有类似 java 中 <span class="token keyword">super</span><span class="token punctuation">.</span><span class="token function">method</span><span class="token punctuation">(</span><span class="token punctuation">)</span>的访问<span class="token string">&quot;父对象&quot;</span>方法的能力
</code></pre></div><blockquote><p>缺点：同一函数生成的多个对象不能在内存中共享代码。</p></blockquote> <div class="language-html extra-class"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
  <span class="token comment">/**
   * 以原型对象为模板创建出新对象
   * 这个函数已经被Chrome和IE9采用，所以需要有个判断这个函数是否已经存在，Crockford的影响力可见一斑
   */</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>Object<span class="token punctuation">.</span>create<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    Object<span class="token punctuation">.</span><span class="token function-variable function">create</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">oldObject</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">function</span> <span class="token constant">F</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token punctuation">}</span>
      <span class="token punctuation">;</span>
      <span class="token class-name">F</span><span class="token punctuation">.</span>prototype <span class="token operator">=</span> oldObject<span class="token punctuation">;</span>
      <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">F</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
  <span class="token comment">/**
   * 在构造函数的原型对象上添加方法
   * 非常推荐这个函数，因为这个函数能够培养出在原型对象中定义方法的良好习惯
   */</span>
  <span class="token class-name">Function</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">method</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">name<span class="token punctuation">,</span> func</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span><span class="token keyword">this</span><span class="token punctuation">.</span>prototype<span class="token punctuation">[</span>name<span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span>prototype<span class="token punctuation">[</span>name<span class="token punctuation">]</span> <span class="token operator">=</span> func<span class="token punctuation">;</span>
      <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>
  <span class="token comment">/**
   * 使构造函数“继承”其他构造函数
   * 实际上是将构造函数的原型对象替换为另外构造函数产生的对象
   *
   */</span>
  Function<span class="token punctuation">.</span><span class="token function">method</span><span class="token punctuation">(</span><span class="token string">'inherits'</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter"><span class="token constant">F</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>prototype <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">F</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token comment">/*****************************************
   * 使用函数创建对象
   * 1 使用函数的闭包实现私有属性
   * 2 子对象可以调用父对象的方法
   *****************************************/</span>
  <span class="token keyword">function</span> <span class="token function">employee</span><span class="token punctuation">(</span><span class="token parameter">name</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">var</span> object <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
    <span class="token comment">//name属性是私有变量</span>
    <span class="token keyword">var</span> name <span class="token operator">=</span> name<span class="token punctuation">;</span>

    <span class="token keyword">var</span> <span class="token function-variable function">getName</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">return</span> name<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token comment">//getName对外公开</span>
    object<span class="token punctuation">.</span>getName <span class="token operator">=</span> getName<span class="token punctuation">;</span>
    <span class="token keyword">return</span> object<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token keyword">function</span> <span class="token function">coder</span><span class="token punctuation">(</span><span class="token parameter">name<span class="token punctuation">,</span> language</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">var</span> object <span class="token operator">=</span> <span class="token function">employee</span><span class="token punctuation">(</span>name<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">var</span> superGetName <span class="token operator">=</span> object<span class="token punctuation">.</span>getName<span class="token punctuation">;</span>
    <span class="token keyword">var</span> language <span class="token operator">=</span> language<span class="token punctuation">;</span>
    <span class="token keyword">var</span> <span class="token function-variable function">getLanguage</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">return</span> language<span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">;</span>
    <span class="token comment">//调用父对象的方法</span>
    <span class="token keyword">var</span> <span class="token function-variable function">getName</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">return</span> <span class="token string">&quot;my name is &quot;</span> <span class="token operator">+</span> <span class="token function">superGetName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">;</span>

    object<span class="token punctuation">.</span>getName <span class="token operator">=</span> getName<span class="token punctuation">;</span>
    <span class="token keyword">return</span> object<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">var</span> e1 <span class="token operator">=</span> <span class="token function">employee</span><span class="token punctuation">(</span><span class="token string">'Jack'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token function">alert</span><span class="token punctuation">(</span>e1<span class="token punctuation">.</span>name<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//undefined</span>
  <span class="token function">alert</span><span class="token punctuation">(</span>e1<span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//Jack</span>

  <span class="token keyword">var</span> c1 <span class="token operator">=</span> <span class="token function">coder</span><span class="token punctuation">(</span><span class="token string">'Jackson'</span><span class="token punctuation">,</span> <span class="token string">'Java'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token function">alert</span><span class="token punctuation">(</span>c1<span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//My name is Jackson</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p>推荐一些极好的关于 JS 面向对象的文章（每一篇都严重推荐，尤其是 crockford 和他的《JavaScript: The Good Parts》)</p> <p>crockford 大师</p> <p>http://javascript.crockford.com/javascript.html</p> <p>http://javascript.crockford.com/prototypal.html</p> <p>http://javascript.crockford.com/inheritance.html</p> <p>http://www.crockford.com/javascript/private.html</p> <p>MDN</p> <p>https://developer.mozilla.org/en-US/docs/JavaScript/Guide/Details_of_the_Object_Model</p> <p>微软杂志</p> <p>http://msdn.microsoft.com/zh-cn/magazine/cc163419.aspx#S4</p> <p>MSDN</p> <p>http://msdn.microsoft.com/en-us/library/dd282900(v=vs.85).aspx</p> <p>http://msdn.microsoft.com/en-us/library/dd229916(v=vs.85)</p> <p>阮一峰</p> <p>http://www.ruanyifeng.com/blog/2010/05/object-oriented_javascript_encapsulation.html</p> <p>http://www.ruanyifeng.com/blog/2012/07/three_ways_to_define_a_javascript_class.html?20120830102326#comment-last</p> <p>http://www.ruanyifeng.com/blog/2010/05/object-oriented_javascript_inheritance.html</p> <p>http://www.ruanyifeng.com/blog/2010/05/object-oriented_javascript_inheritance_continued.html</p> <p>others</p> <p>http://bonsaiden.github.com/JavaScript-Garden/zh/</p> <p>怕丢了所以全复制个来</p> <p>原文在http://lazy2009.iteye.com/blog/1675059
<a href="https://www.cnblogs.com/935415150wang/p/7355379.html" target="_blank" rel="noopener noreferrer">深刻理解 JavaScript 基于原型的面向对象<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> Full</p></div></section> <footer class="page-edit"><!----> <!----></footer> <!----> <div class="comments-wrapper"><!----></div> <ul class="side-bar sub-sidebar-wrapper" style="width:12rem;" data-v-70334359><li class="level-2" data-v-70334359><a href="/JS/prototype_function/jsObjectBaseOnPrototype.html#主题一、原型" class="sidebar-link reco-side-主题一、原型" data-v-70334359>主题一、原型</a></li><li class="level-3" data-v-70334359><a href="/JS/prototype_function/jsObjectBaseOnPrototype.html#一、基于原型的语言的特点" class="sidebar-link reco-side-一、基于原型的语言的特点" data-v-70334359>一、基于原型的语言的特点</a></li><li class="level-3" data-v-70334359><a href="/JS/prototype_function/jsObjectBaseOnPrototype.html#二、基于原型的语言中对象的创建" class="sidebar-link reco-side-二、基于原型的语言中对象的创建" data-v-70334359>二、基于原型的语言中对象的创建</a></li><li class="level-3" data-v-70334359><a href="/JS/prototype_function/jsObjectBaseOnPrototype.html#三、原型-为复用代码而生" class="sidebar-link reco-side-三、原型-为复用代码而生" data-v-70334359>三、原型，为复用代码而生</a></li><li class="level-3" data-v-70334359><a href="/JS/prototype_function/jsObjectBaseOnPrototype.html#四、继承" class="sidebar-link reco-side-四、继承" data-v-70334359>四、继承</a></li><li class="level-3" data-v-70334359><a href="/JS/prototype_function/jsObjectBaseOnPrototype.html#小结" class="sidebar-link reco-side-小结" data-v-70334359>小结</a></li><li class="level-2" data-v-70334359><a href="/JS/prototype_function/jsObjectBaseOnPrototype.html#主题二、深刻理解-javascript-基于原型的面向对象" class="sidebar-link reco-side-主题二、深刻理解-javascript-基于原型的面向对象" data-v-70334359>主题二、深刻理解 JavaScript 基于原型的面向对象</a></li><li class="level-3" data-v-70334359><a href="/JS/prototype_function/jsObjectBaseOnPrototype.html#一、饱受争议的-javascript" class="sidebar-link reco-side-一、饱受争议的-javascript" data-v-70334359>一、饱受争议的 javascript</a></li><li class="level-3" data-v-70334359><a href="/JS/prototype_function/jsObjectBaseOnPrototype.html#js-是世界上最容易被误解的语言" class="sidebar-link reco-side-js-是世界上最容易被误解的语言" data-v-70334359>js 是世界上最容易被误解的语言</a></li><li class="level-3" data-v-70334359><a href="/JS/prototype_function/jsObjectBaseOnPrototype.html#二、从原型本质-站在语言设计者角度-理解-constructor-模式" class="sidebar-link reco-side-二、从原型本质-站在语言设计者角度-理解-constructor-模式" data-v-70334359>二、从原型本质，站在语言设计者角度，理解 constructor 模式</a></li><li class="level-3" data-v-70334359><a href="/JS/prototype_function/jsObjectBaseOnPrototype.html#_1-实现创建对象" class="sidebar-link reco-side-_1-实现创建对象" data-v-70334359>1 实现创建对象</a></li><li class="level-3" data-v-70334359><a href="/JS/prototype_function/jsObjectBaseOnPrototype.html#_2-实现继承" class="sidebar-link reco-side-_2-实现继承" data-v-70334359>2 实现继承</a></li><li class="level-3" data-v-70334359><a href="/JS/prototype_function/jsObjectBaseOnPrototype.html#_2-a-实现类继承" class="sidebar-link reco-side-_2-a-实现类继承" data-v-70334359>2.a 实现类继承</a></li><li class="level-3" data-v-70334359><a href="/JS/prototype_function/jsObjectBaseOnPrototype.html#_2-b-实现原型继承" class="sidebar-link reco-side-_2-b-实现原型继承" data-v-70334359>2.b 实现原型继承</a></li><li class="level-3" data-v-70334359><a href="/JS/prototype_function/jsObjectBaseOnPrototype.html#优化-1-函数封装" class="sidebar-link reco-side-优化-1-函数封装" data-v-70334359>优化 1. 函数封装</a></li><li class="level-3" data-v-70334359><a href="/JS/prototype_function/jsObjectBaseOnPrototype.html#优化-2-缩减参数" class="sidebar-link reco-side-优化-2-缩减参数" data-v-70334359>优化 2. 缩减参数</a></li><li class="level-3" data-v-70334359><a href="/JS/prototype_function/jsObjectBaseOnPrototype.html#三、从-javascript-的原型本质-理解-javascript-的构造器模式" class="sidebar-link reco-side-三、从-javascript-的原型本质-理解-javascript-的构造器模式" data-v-70334359>三、从 javascript 的原型本质，理解 javascript 的构造器模式</a></li><li class="level-3" data-v-70334359><a href="/JS/prototype_function/jsObjectBaseOnPrototype.html#理解-new-func" class="sidebar-link reco-side-理解-new-func" data-v-70334359>理解 new func()</a></li><li class="level-3" data-v-70334359><a href="/JS/prototype_function/jsObjectBaseOnPrototype.html#_2-简单罗列-javascript-构造器模式的特点" class="sidebar-link reco-side-_2-简单罗列-javascript-构造器模式的特点" data-v-70334359>2. 简单罗列 javascript 构造器模式的特点</a></li><li class="level-3" data-v-70334359><a href="/JS/prototype_function/jsObjectBaseOnPrototype.html#_3-可以修改或替换构造函数都会默认关联的原型对象。" class="sidebar-link reco-side-_3-可以修改或替换构造函数都会默认关联的原型对象。" data-v-70334359>3.可以修改或替换构造函数都会默认关联的原型对象。</a></li><li class="level-3" data-v-70334359><a href="/JS/prototype_function/jsObjectBaseOnPrototype.html#_5-b-对象继承体系结构图" class="sidebar-link reco-side-_5-b-对象继承体系结构图" data-v-70334359>5.b.对象继承体系结构图</a></li><li class="level-3" data-v-70334359><a href="/JS/prototype_function/jsObjectBaseOnPrototype.html#_6-构造器模式的-best-practice" class="sidebar-link reco-side-_6-构造器模式的-best-practice" data-v-70334359>6. 构造器模式的 best practice</a></li><li class="level-3" data-v-70334359><a href="/JS/prototype_function/jsObjectBaseOnPrototype.html#四、模拟基于类的面向对象" class="sidebar-link reco-side-四、模拟基于类的面向对象" data-v-70334359>四、模拟基于类的面向对象</a></li><li class="level-3" data-v-70334359><a href="/JS/prototype_function/jsObjectBaseOnPrototype.html#_1-该不该模拟类" class="sidebar-link reco-side-_1-该不该模拟类" data-v-70334359>1. 该不该模拟类</a></li><li class="level-3" data-v-70334359><a href="/JS/prototype_function/jsObjectBaseOnPrototype.html#_2-欣赏-crockford-对类的模拟" class="sidebar-link reco-side-_2-欣赏-crockford-对类的模拟" data-v-70334359>2. 欣赏 Crockford 对类的模拟</a></li></ul></main> <!----></div></div></div></div><div class="global-ui"><div class="back-to-ceiling" style="right:1rem;bottom:6rem;width:2.5rem;height:2.5rem;border-radius:.25rem;line-height:2.5rem;display:none;" data-v-c6073ba8 data-v-c6073ba8><svg t="1574745035067" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="5404" class="icon" data-v-c6073ba8><path d="M526.60727968 10.90185116a27.675 27.675 0 0 0-29.21455937 0c-131.36607665 82.28402758-218.69155461 228.01873535-218.69155402 394.07834331a462.20625001 462.20625001 0 0 0 5.36959153 69.94390903c1.00431239 6.55289093-0.34802892 13.13561351-3.76865779 18.80351572-32.63518765 54.11355614-51.75690182 118.55860487-51.7569018 187.94566865a371.06718723 371.06718723 0 0 0 11.50484808 91.98906777c6.53300375 25.50556257 41.68394495 28.14064038 52.69160883 4.22606766 17.37162448-37.73630017 42.14135425-72.50938081 72.80769204-103.21549295 2.18761121 3.04276886 4.15646224 6.24463696 6.40373557 9.22774369a1871.4375 1871.4375 0 0 0 140.04691725 5.34970492 1866.36093723 1866.36093723 0 0 0 140.04691723-5.34970492c2.24727335-2.98310674 4.21612437-6.18497483 6.3937923-9.2178004 30.66633723 30.70611158 55.4360664 65.4791928 72.80769147 103.21549355 11.00766384 23.91457269 46.15860503 21.27949489 52.69160879-4.22606768a371.15156223 371.15156223 0 0 0 11.514792-91.99901164c0-69.36717486-19.13165746-133.82216804-51.75690182-187.92578088-3.42062944-5.66790279-4.76302748-12.26056868-3.76865837-18.80351632a462.20625001 462.20625001 0 0 0 5.36959269-69.943909c-0.00994388-166.08943902-87.32547796-311.81420293-218.6915546-394.09823051zM605.93803103 357.87693858a93.93749974 93.93749974 0 1 1-187.89594924 6.1e-7 93.93749974 93.93749974 0 0 1 187.89594924-6.1e-7z" p-id="5405" data-v-c6073ba8></path><path d="M429.50777625 765.63860547C429.50777625 803.39355007 466.44236686 1000.39046097 512.00932183 1000.39046097c45.56695499 0 82.4922232-197.00623328 82.5015456-234.7518555 0-37.75494459-36.9345906-68.35043303-82.4922232-68.34111062-45.57627738-0.00932239-82.52019037 30.59548842-82.51086798 68.34111062z" p-id="5406" data-v-c6073ba8></path></svg></div></div></div>
    <script src="/assets/js/app.f6381760.js" defer></script><script src="/assets/js/3.bc729665.js" defer></script><script src="/assets/js/1.70674a6e.js" defer></script><script src="/assets/js/9.03d2aac8.js" defer></script>
  </body>
</html>
